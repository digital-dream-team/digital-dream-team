{"version":3,"sources":["main.js"],"names":["$","document","ready","on","this","removeClass","addClass","src","find","attr","e","stopPropagation","preventDefault","method","url","success","data","error","serialized","serialize","branchLimit","branchItems","type","hideExtraBranches","branchStep","searchValue","step","limit","each","index","resizeHander","hasClass","anchor","querySelectorAll","innerWidth","addEventListener","length","behavior","trim","slice","clone","html","truncated","appendTo","stepLimit","contentValue","val","result","toLowerCase","window","text","indexOf","event","remove","forEach","getAttribute","querySelector","scrollIntoView","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["(function($) {\r\n  $(document).ready(function() {\r\n    // Load features on mobile\r\n    $(\"#loadFeaturesBtn\").on(\"click\", function() {\r\n      $(this)\r\n        .removeClass(\"d-block\")\r\n        .addClass(\"d-none\");\r\n      $(\".feature\").removeClass(\"d-none\");\r\n    });\r\n\r\n    // Open video overlay\r\n    $(\"#videoBtn, #aboutVideoBtn\").on(\"click\", function() {\r\n      $(\"#video-popup\").addClass(\"active\");\r\n      $(\"body\").addClass(\"overflow-hidden\");\r\n    });\r\n\r\n    // Close overlay on outside click\r\n    $(\".cdk-overlay\").on(\"click\", function() {\r\n      $(this).removeClass(\"active\");\r\n      $(\"body\").removeClass(\"overflow-hidden\");\r\n\r\n      // Destroy iframe video player\r\n      const src = $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\");\r\n      $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\", \"\");\r\n      $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\", src);\r\n    });\r\n    // Prevent overlay close on overlay content click\r\n    $(\".cdk-overlay__content\").on(\"click\", function(e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n    $(\"#contactForm\").on(\"submit\", function(e) {\r\n      e.preventDefault();\r\n      const url = $(this).attr(\"action\");\r\n      const method = $(this).attr(\"method\");\r\n      const serialized = $(this).serialize();\r\n\r\n      $(\r\n        \".contact-form__response-success, .contact-form__response-error\"\r\n      ).removeClass(\"active\");\r\n\r\n      $.ajax({\r\n        url,\r\n        type: method,\r\n        data: serialized,\r\n        success: function(data) {\r\n          $(\".contact-form__response-success\").addClass(\"active\");\r\n        },\r\n        error: function(data) {\r\n          $(\".contact-form__response-error\").addClass(\"active\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // Branches table load more\r\n    let branchStep = 1;\r\n    const branchLimit = 9;\r\n    const branchItems = $(\".branches-table__content .row\");\r\n\r\n    if (branchItems.length > 0) {\r\n      hideExtraBranches(branchStep, branchLimit);\r\n      $(\"#loadBranchesBtn\").on(\"click\", function() {\r\n        branchStep += 1;\r\n        hideExtraBranches(branchStep, branchLimit);\r\n        if (!$(\".branches-table__content .row\").hasClass(\"d-none\")) {\r\n          $(this).addClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    function hideExtraBranches(step, limit) {\r\n      branchItems.each(function(index) {\r\n        const stepLimit = step * limit;\r\n        if (index + 1 > stepLimit) {\r\n          $(this).addClass(\"d-none\");\r\n        } else {\r\n          $(this).removeClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    // Branches search\r\n\r\n    $(\"#branchesSearch\").on(\"keyup change\", function() {\r\n      const searchValue = $(this).val()\r\n        ? $(this)\r\n            .val()\r\n            .toLowerCase()\r\n        : null;\r\n      if (!searchValue) {\r\n        branchStep = 1;\r\n        hideExtraBranches(branchStep, branchLimit);\r\n        $(\"#loadBranchesBtn\").removeClass(\"d-none\");\r\n        return;\r\n      }\r\n      $(\"#loadBranchesBtn\").addClass(\"d-none\");\r\n      branchItems.each(function() {\r\n        let contentValue = \"\";\r\n        $(this)\r\n          .find(\".branches-table__for-search\")\r\n          .each(function() {\r\n            contentValue = $(this)\r\n              .text()\r\n              .trim();\r\n          });\r\n\r\n        // filter\r\n        const result = contentValue.toLowerCase().indexOf(searchValue) > -1;\r\n        if (result) {\r\n          $(this).removeClass(\"d-none\");\r\n        } else {\r\n          $(this).addClass(\"d-none\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // On resize\r\n    resizeHander();\r\n    window.addEventListener(\"resize\", function(event) {\r\n      resizeHander();\r\n    });\r\n\r\n    // Read more for mobile version\r\n    $(\"#aboutReadMoreBtn\").on(\"click\", function() {\r\n      $(\".about-section__text\").removeClass(\"d-none\");\r\n      $(\".about-section__text-truncated\").remove();\r\n      $(this).addClass(\"activated\");\r\n    });\r\n\r\n    function resizeHander() {\r\n      // About section read more on mobile\r\n      if ($(\"#aboutReadMoreBtn\").hasClass(\"activated\")) {\r\n        return;\r\n      }\r\n      const windowWidth = window.innerWidth;\r\n      if (windowWidth <= 768) {\r\n        $(\"#branchesSearch\").attr(\"placeholder\", \"Поиск по городу\");\r\n\r\n        if ($(\".about-section__text-truncated\").length === 0) {\r\n          $(\".about-section__text\").addClass(\"d-none\");\r\n          const truncated =\r\n            $(\".about-section__text\")\r\n              .text()\r\n              .trim()\r\n              .slice(0, 177) + \" ...\";\r\n\r\n          $(\".about-section__text\")\r\n            .clone()\r\n            .attr(\"class\", \"about-section__text-truncated\")\r\n            .html(truncated)\r\n            .appendTo($(\".about-section__text-wrapper\"));\r\n        } else {\r\n          $(\".about-section__text\").addClass(\"d-none\");\r\n          $(\".about-section__text-truncated\").removeClass(\"d-none\");\r\n        }\r\n      } else {\r\n        $(\"#branchesSearch\").attr(\r\n          \"placeholder\",\r\n          \"Узнайте, есть ли наш филиал в вашем городе...\"\r\n        );\r\n        $(\".about-section__text\").removeClass(\"d-none\");\r\n        $(\".about-section__text-truncated\").addClass(\"d-none\");\r\n      }\r\n    }\r\n  });\r\n\r\n  // Smooth anchor scroll\r\n  document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n    anchor.addEventListener(\"click\", function(e) {\r\n      if (this.getAttribute(\"href\") === \"#\") {\r\n        return;\r\n      }\r\n      e.preventDefault();\r\n      document.querySelector(this.getAttribute(\"href\")).scrollIntoView({\r\n        behavior: \"smooth\"\r\n      });\r\n    });\r\n  });\r\n})(jQuery);\r\n"]}