{"version":3,"sources":["main.js"],"names":["$","document","ready","on","this","removeClass","addClass","length","html","data","preventDefault","attr","find","serialized","type","e","error","url","method","serialize","branchStep","branchLimit","ajax","branchItems","hideExtraBranches","each","searchValue","step","limit","index","resizeHander","hasClass","getAttribute","innerWidth","behavior","truncated","text","trim","slice","clone","appendTo","result","contentValue","toLowerCase","window","indexOf","windowWidth","addEventListener","event","remove","querySelectorAll","forEach","anchor","querySelector","scrollIntoView","jQuery"],"mappings":"cAAA,SAAUA,GACRA,EAAEC,UAAUC,MAAM,WAAhBD,EAAAA,SAAUC,OAKVF,EAAE,oBAAoBG,GAAG,QAAS,WAAhCH,EAAAI,MACEC,YACCA,WAEDC,SAAD,UAJHN,EAOA,YAAAK,YAAA,YAIIL,EAAA,wBAA0BO,QAA5BP,EAAE,uBAAuBG,GAAG,QAAS,WAArCH,EAAAI,MAAAE,SAAA,UAWFN,EAAA,wBAAAQ,KANM,8JACER,EAAE,wBAAwBS,KAAK,UAMrC,kBAMFT,EAAE,6BAA4BG,GAAA,QAAW,WACvCH,EAAE,gBAAMK,SAAY,UACpBL,EAAE,QAAQK,SAAAA,qBASXL,EAXD,gBAYAG,GAAA,QAAA,WAXEH,EAAEI,MAAMC,YAAY,UAYpBL,EAAA,QAAAK,YAAA,mBAIAL,EAAAI,MACEM,KAAAA,UACFC,KAAS,MAAK,IACdX,EAAAI,MACAQ,KAAMC,UAGJF,KAAA,MAAAX,EAAA,wBAAAS,KAAA,aAKAK,EAAAA,yBAFKX,GAAA,QAAA,SAAAY,GAGLN,EAAAA,oBAGCT,EAAA,gBANIG,GAAA,SAAA,SAAAY,GAOLC,EAAAA,iBACEhB,IAAEiB,EAAAjB,EAAAI,MAAAO,KAAA,UACHO,EAAAlB,EAAAI,MAAAO,KAAA,UATHE,EAAAb,EAAAI,MAAAe,YAJAnB,EAkBEoB,kEACEC,YAAW,UAffrB,EAAEsB,KAAK,CAkBLC,IAAAA,EACFC,KAAAA,EACEf,KAAAI,EACAO,QAAAA,SAAAX,GACAe,EAAAA,mCAA8BH,SAA9B,WACAL,MAAO,SAAAP,GACLT,EAAE,iCAAFM,SAAA,eAMJiB,IAAAA,EAAYE,EAdRF,EAAcvB,EAAE,iCAgCpB,SAAK0B,EAAaC,EAAAC,GAChBR,EAAUK,KAAV,SAAAI,GACkBT,EAAAA,EAChBS,EAAA,EACF7B,EAAAI,MAAAE,SAAA,UAjBEN,EAAEI,MAAMC,YAAY,YAuFzB,SAAAyB,IAhCC,IAAI9B,EAAE,qBAAqB+B,SAAS,aAuClC,GADOC,OAAaC,YACpB,IAEAvB,GADDV,EAAA,mBAAAW,KAAA,cAAA,mBACD,IAAED,EAAAA,kCAAFH,OAAA,CACAN,EAAAA,wBAA4B+B,SAAAA,UAC1BE,IAAQC,EADVnC,EAAA,wBALFoC,OADFC,OA5LFC,MAAA,EAAA,KAAA,OAuKUtC,EAAE,wBACCuC,QACA5B,KAAK,QAAS,iCACdH,KAAK2B,GACLK,SAASxC,EAAE,sCAEdA,EAAE,wBAAwBM,SAAS,UACnCN,EAAE,kCAAkCK,YAAY,eAGlDL,EAAE,mBAAmBW,KACnB,cACA,iDAEFX,EAAE,wBAAwBK,YAAY,UACtCL,EAAE,kCAAkCM,SAAS,UAvF1B,EAAjBN,EAAQM,SACTkB,EAAMJ,EAHWO,GAIhB3B,EAAAA,oBAAQK,GAAY,QAApB,WALJmB,EAMGJ,GAAA,EALiBO,GAStB3B,EAAA,iCAAA+B,SAAA,WAhBM/B,EAAEI,MAAME,SAAS,aAkBvBN,EAAE,mBAAmBG,GAAG,eAAgB,WAwBpC,IAAMsC,EAASC,EAAAA,MAAaC,MAtB1B3C,EAAEI,MAuBAqC,MACAE,cADJ,KAGE3C,IAAC0B,EAlBH,OAGFF,EAgBGJ,EAAA,EAxCiBO,QA4CtB3B,EAAA,oBAAAK,YAAA,UAEAuC,EAAAA,oBAAwBtC,SAAxB,UACEwB,EAAYL,KAAA,WAGd,IAAAiB,EAAA,GAxBI1C,EAAEI,MAyBJQ,KAAA,+BACEa,KAAA,WACAiB,EAAA1C,EAAAI,MACME,OAHV+B,UAQoD,EAA5CK,EAAqBX,cAASc,QAAcnB,GAEjD1B,EAAAI,MAAAC,YAAA,UACKyC,EAAAA,MAAAA,SAAcF,cAKhB5C,IACA4C,OAAAG,iBACI,SAAA,SAAAC,GAKJhD,MAQDA,EAAA,qBAAAG,GAAA,QAAA,WACFH,EApBD,wBAoBOK,YAAA,UACLL,EAAAA,kCACEiD,SAGFjD,EAAAA,MAAEM,SAAA,iBAORL,SAASiD,iBAAiB,gBAAgBC,QAAQ,SAAAC,GAChDA,EAAOL,iBAAiB,QAAS,SAAShC,GACN,MAA9BX,KAAK4B,aAAa,UAGtBjB,EAAEL,iBACFT,SAASoD,cAAcjD,KAAK4B,aAAa,SAASsB,eAAe,CAC/DpB,SAAU,gBAnMlB,CAuMGqB","file":"main.min.js","sourcesContent":["(function($) {\r\n  $(document).ready(function() {\r\n    // Lazy load\r\n    $(\".lazy\").lazy();\r\n\r\n    // Load features on mobile\r\n    $(\"#loadFeaturesBtn\").on(\"click\", function() {\r\n      $(this)\r\n        .removeClass(\"d-block\")\r\n        .addClass(\"d-none\");\r\n      $(\".feature\").removeClass(\"d-none\");\r\n    });\r\n\r\n    // Video defer\r\n    // Check to see if youtube wrapper exists\r\n    if ($(\".youtube-video-place\").length) {\r\n      // If user clicks on the video wrapper load the video.\r\n      $(\".play-youtube-video\").on(\"click\", function() {\r\n        /* Dynamically inject the iframe on demand of the user.\r\n      Pull the youtube url from the data attribute on the wrapper element. */\r\n        $(this).addClass(\"d-none\");\r\n        $(\".youtube-video-place\").html(\r\n          '<iframe allowfullscreen allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen class=\"embed-responsive-item\" src=\"' +\r\n            $(\".youtube-video-place\").data(\"yt-url\") +\r\n            '\" ></iframe>'\r\n        );\r\n      });\r\n    }\r\n    // Open video overlay\r\n    $(\"#videoBtn, #aboutVideoBtn\").on(\"click\", function() {\r\n      $(\"#video-popup\").addClass(\"active\");\r\n      $(\"body\").addClass(\"overflow-hidden\");\r\n    });\r\n\r\n    // Close overlay on outside click\r\n    $(\".cdk-overlay\").on(\"click\", function() {\r\n      $(this).removeClass(\"active\");\r\n      $(\"body\").removeClass(\"overflow-hidden\");\r\n\r\n      // Destroy iframe video player\r\n      $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\", \"\");\r\n      $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\", $(\".youtube-video-place\").data(\"yt-url\"));\r\n    });\r\n    // Prevent overlay close on overlay content click\r\n    $(\".cdk-overlay__content\").on(\"click\", function(e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n    $(\"#contactForm\").on(\"submit\", function(e) {\r\n      e.preventDefault();\r\n      const url = $(this).attr(\"action\");\r\n      const method = $(this).attr(\"method\");\r\n      const serialized = $(this).serialize();\r\n\r\n      $(\r\n        \".contact-form__response-success, .contact-form__response-error\"\r\n      ).removeClass(\"active\");\r\n\r\n      $.ajax({\r\n        url,\r\n        type: method,\r\n        data: serialized,\r\n        success: function(data) {\r\n          $(\".contact-form__response-success\").addClass(\"active\");\r\n        },\r\n        error: function(data) {\r\n          $(\".contact-form__response-error\").addClass(\"active\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // Branches table load more\r\n    let branchStep = 1;\r\n    const branchLimit = 9;\r\n    const branchItems = $(\".branches-table__content .row\");\r\n\r\n    if (branchItems.length > 0) {\r\n      hideExtraBranches(branchStep, branchLimit);\r\n      $(\"#loadBranchesBtn\").on(\"click\", function() {\r\n        branchStep += 1;\r\n        hideExtraBranches(branchStep, branchLimit);\r\n        if (!$(\".branches-table__content .row\").hasClass(\"d-none\")) {\r\n          $(this).addClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    function hideExtraBranches(step, limit) {\r\n      branchItems.each(function(index) {\r\n        const stepLimit = step * limit;\r\n        if (index + 1 > stepLimit) {\r\n          $(this).addClass(\"d-none\");\r\n        } else {\r\n          $(this).removeClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    // Branches search\r\n\r\n    $(\"#branchesSearch\").on(\"keyup change\", function() {\r\n      const searchValue = $(this).val()\r\n        ? $(this)\r\n            .val()\r\n            .toLowerCase()\r\n        : null;\r\n      if (!searchValue) {\r\n        branchStep = 1;\r\n        hideExtraBranches(branchStep, branchLimit);\r\n        $(\"#loadBranchesBtn\").removeClass(\"d-none\");\r\n        return;\r\n      }\r\n      $(\"#loadBranchesBtn\").addClass(\"d-none\");\r\n      branchItems.each(function() {\r\n        let contentValue = \"\";\r\n        $(this)\r\n          .find(\".branches-table__for-search\")\r\n          .each(function() {\r\n            contentValue = $(this)\r\n              .text()\r\n              .trim();\r\n          });\r\n\r\n        // filter\r\n        const result = contentValue.toLowerCase().indexOf(searchValue) > -1;\r\n        if (result) {\r\n          $(this).removeClass(\"d-none\");\r\n        } else {\r\n          $(this).addClass(\"d-none\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // On resize\r\n    resizeHander();\r\n    window.addEventListener(\"resize\", function(event) {\r\n      resizeHander();\r\n    });\r\n\r\n    // Read more for mobile version\r\n    $(\"#aboutReadMoreBtn\").on(\"click\", function() {\r\n      $(\".about-section__text\").removeClass(\"d-none\");\r\n      $(\".about-section__text-truncated\").remove();\r\n      $(this).addClass(\"activated\");\r\n    });\r\n\r\n    function resizeHander() {\r\n      // About section read more on mobile\r\n      if ($(\"#aboutReadMoreBtn\").hasClass(\"activated\")) {\r\n        return;\r\n      }\r\n      const windowWidth = window.innerWidth;\r\n      if (windowWidth <= 768) {\r\n        $(\"#branchesSearch\").attr(\"placeholder\", \"Поиск по городу\");\r\n\r\n        if ($(\".about-section__text-truncated\").length === 0) {\r\n          $(\".about-section__text\").addClass(\"d-none\");\r\n          const truncated =\r\n            $(\".about-section__text\")\r\n              .text()\r\n              .trim()\r\n              .slice(0, 177) + \" ...\";\r\n\r\n          $(\".about-section__text\")\r\n            .clone()\r\n            .attr(\"class\", \"about-section__text-truncated\")\r\n            .html(truncated)\r\n            .appendTo($(\".about-section__text-wrapper\"));\r\n        } else {\r\n          $(\".about-section__text\").addClass(\"d-none\");\r\n          $(\".about-section__text-truncated\").removeClass(\"d-none\");\r\n        }\r\n      } else {\r\n        $(\"#branchesSearch\").attr(\r\n          \"placeholder\",\r\n          \"Узнайте, есть ли наш филиал в вашем городе...\"\r\n        );\r\n        $(\".about-section__text\").removeClass(\"d-none\");\r\n        $(\".about-section__text-truncated\").addClass(\"d-none\");\r\n      }\r\n    }\r\n  });\r\n\r\n  // Smooth anchor scroll\r\n  document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n    anchor.addEventListener(\"click\", function(e) {\r\n      if (this.getAttribute(\"href\") === \"#\") {\r\n        return;\r\n      }\r\n      e.preventDefault();\r\n      document.querySelector(this.getAttribute(\"href\")).scrollIntoView({\r\n        behavior: \"smooth\"\r\n      });\r\n    });\r\n  });\r\n})(jQuery);\r\n"]}