{"version":3,"sources":["main.js"],"names":["$","window","onload","vidDefer","document","getElementsByTagName","init","i","length","setAttribute","getAttribute","ready","lazy","on","this","removeClass","addClass","find","src","stopPropagation","preventDefault","method","attr","serialized","url","e","type","error","data","serialize","branchStep","branchItems","hideExtraBranches","success","hasClass","step","limit","searchValue","index","resizeHander","addEventListener","innerWidth","querySelector","behavior","text","trim","slice","clone","html","truncated","appendTo","stepLimit","val","result","each","contentValue","toLowerCase","indexOf","event","remove","querySelectorAll","forEach","anchor","scrollIntoView","jQuery"],"mappings":"cAAA,SAAUA,GAMHC,OAAAC,OALL,WAAA,IADD,IAAAC,EAAYC,SAAAC,qBAAA,UACFC,EAAT,EAAgBC,EAAAJ,EAAAK,OAAAD,IACVJ,EAAWC,GAAAA,aAASC,aAGpBF,EAASI,GAAGE,aAAa,MAAON,EAASI,GAAGG,aAAa,cAG9DV,EAAAI,UAAAO,MAAA,WAYCX,EAAA,SAAAY,OAMAZ,EAAE,oBAAoBa,GAAG,QAAS,WAAhCb,EAAAc,MACEC,YACCA,WAEDC,SAAD,UAJHhB,EAOA,YAAAe,YAAA,YAGEf,EAAAA,6BAAmBa,GAAA,QAAnB,WAFFb,EAKA,gBAAAgB,SAAA,UAHEhB,EAAE,QAAQgB,SAAS,qBAIrBhB,EAAE,gBAAgBa,GAAG,QAAS,WAK5Bb,EAAAc,MAASC,YACNE,UAEHjB,EAAE,QACCiB,YADH,mBAHA,IAAMC,EAAMlB,EAAEc,MAWdG,KAAA,UACEE,KAAAA,OADJnB,EAAAc,MAIEG,KAAA,UACEG,KAAAA,MAAAA,IACFpB,EAAAc,MACAG,KAAMI,UACNC,KAAMC,MAAUL,KAOdM,EAAAA,yBADKX,GAAA,QAAA,SAAAY,GAELC,EAAAA,oBAGE1B,EAAAA,gBAAEa,GAAA,SAAA,SAAAY,GACHA,EAAAL,iBACDO,IAAAA,EAAO3B,EAAAc,MAAAQ,KAASM,UACZP,EAAArB,EAAAc,MAAAQ,KAAA,UACHC,EAAAvB,EAAAc,MAAAe,YAnBL7B,EAOI,kEAiBA8B,YAAU,UAEd9B,EAAM+B,KAAAA,CAfFP,IAAAA,EAiBAO,KAAAA,EACFC,KAAAA,EACEC,QAAA,SAADL,GACCE,EAAAA,mCAAAd,SAAA,WAdAW,MAAO,SAASC,GAgBhB5B,EAAI,iCAAGgB,SAAiCkB,eAM5C,IAAAJ,EAASE,EAELD,EAAkBI,EAAAA,iCAFtB,SAASH,EAAkBG,EAAMC,GAmB/BL,EAAKM,KAAL,SAAkBC,GAChBH,EAAAC,EACAJ,EAAAA,EACEhC,EAAAc,MAAAE,SAAA,UAEHhB,EAAAc,MAAAC,YAAA,YAoEA,SAAAwB,IAIL,IAAAvC,EAAA,qBAAAkC,SAAA,aAGI,GADKM,OAAiBC,YACb/B,IA/BP,GAgCAV,EAAA,mBAAAsB,KAAA,cAAA,mBAhCmD,IAA/CtB,EAAE,kCAAkCQ,OAAc,CAkCtDY,EAAAA,wBAAFJ,SAAA,UACAZ,IAASsC,EACPC,EAAAA,wBADFC,OALFC,OADFC,MAAA,EAAA,KAAA,OArBQ9C,EAAE,wBACC+C,QACAzB,KAAK,QAAS,iCACd0B,KAAKC,GACLC,SAASlD,EAAE,sCAEdA,EAAE,wBAAwBgB,SAAS,UACnChB,EAAE,kCAAkCe,YAAY,eAGlDf,EAAE,mBAAmBsB,KACnB,cACA,iDAEFtB,EAAE,wBAAwBe,YAAY,UACtCf,EAAE,kCAAkCgB,SAAS,UAxF7BmC,EAAhBpB,EAAYvB,SACVR,EAAQgB,EAHK,GAIdhB,EAAA,oBAAMa,GAAA,QAAA,WAENmB,EADChC,GAAQe,EALK,GAAjBf,EAAA,iCAAAkC,SAAA,WAUFlC,EAAAc,MAAAE,SAAA,aAuBOhB,EAAA,mBAEHa,GAAA,eAAA,WAtBF,IAAMwB,EAAcrC,EAAEc,MAAMsC,MAuB1BpD,EAAMqD,MArBDD,MAsBDC,cACFrD,KACD,IAFDqC,EAQJ,OAJKL,EADChC,EAAQgB,EAxCK,QAyBjBhB,EAAA,oBAAAe,YAAA,UAqBFwB,EAAAA,oBAAYvB,SAAA,UACZf,EAAOuC,KAAAA,WACLD,IAAAA,EAAY,GAGdvC,EAAAc,MAvBOG,KAAK,+BAwBVqC,KAAA,WACEC,EAAAvD,EAAAc,MACA8B,OACM5B,UAIR,EAAAuC,EAAAC,cAAAC,QAAApB,GAEErC,EAAAc,MAAAC,YAAA,UArBEf,EAAEc,MAAME,SAAS,cA2BnBuB,IACEvC,OAACwC,iBAAC,SAAwBxB,SAAS0C,GACnCnB,MAaAvC,EAAAA,qBAAEa,GAAA,QAAA,WACHb,EAAA,wBAAAe,YAAA,UACFf,EApBD,kCAoBO2D,SACL3D,EAAAA,MAAEgB,SAAA,iBAWRZ,SAASwD,iBAAiB,gBAAgBC,QAAQ,SAAAC,GAChDA,EAAOtB,iBAAiB,QAAS,SAASf,GACN,MAA9BX,KAAKJ,aAAa,UAGtBe,EAAEL,iBACFhB,SAASsC,cAAc5B,KAAKJ,aAAa,SAASqD,eAAe,CAC/DpB,SAAU,gBA3MlB,CA+MGqB","file":"main.min.js","sourcesContent":["(function($) {\r\n  function init() {\r\n    var vidDefer = document.getElementsByTagName(\"iframe\");\r\n    for (var i = 0; i < vidDefer.length; i++) {\r\n      if (vidDefer[i].getAttribute(\"data-src\")) {\r\n        vidDefer[i].setAttribute(\"src\", vidDefer[i].getAttribute(\"data-src\"));\r\n      }\r\n    }\r\n  }\r\n  window.onload = init;\r\n\r\n  $(document).ready(function() {\r\n    // // Yotube defer\r\n    // function init() {\r\n    //   var vidDefer = document.getElementsByTagName(\"iframe\");\r\n    //   for (var i = 0; i < vidDefer.length; i++) {\r\n    //     if (vidDefer[i].getAttribute(\"data-src\")) {\r\n    //       vidDefer[i].setAttribute(\"src\", vidDefer[i].getAttribute(\"data-src\"));\r\n    //     }\r\n    //   }\r\n    // }\r\n\r\n    // Lazy load\r\n    $(\".lazy\").lazy();\r\n\r\n    // Load features on mobile\r\n    $(\"#loadFeaturesBtn\").on(\"click\", function() {\r\n      $(this)\r\n        .removeClass(\"d-block\")\r\n        .addClass(\"d-none\");\r\n      $(\".feature\").removeClass(\"d-none\");\r\n    });\r\n\r\n    // Open video overlay\r\n    $(\"#videoBtn, #aboutVideoBtn\").on(\"click\", function() {\r\n      $(\"#video-popup\").addClass(\"active\");\r\n      $(\"body\").addClass(\"overflow-hidden\");\r\n    });\r\n\r\n    // Close overlay on outside click\r\n    $(\".cdk-overlay\").on(\"click\", function() {\r\n      $(this).removeClass(\"active\");\r\n      $(\"body\").removeClass(\"overflow-hidden\");\r\n\r\n      // Destroy iframe video player\r\n      const src = $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\");\r\n      $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\", \"\");\r\n      $(this)\r\n        .find(\"iframe\")\r\n        .attr(\"src\", src);\r\n    });\r\n    // Prevent overlay close on overlay content click\r\n    $(\".cdk-overlay__content\").on(\"click\", function(e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n    $(\"#contactForm\").on(\"submit\", function(e) {\r\n      e.preventDefault();\r\n      const url = $(this).attr(\"action\");\r\n      const method = $(this).attr(\"method\");\r\n      const serialized = $(this).serialize();\r\n\r\n      $(\r\n        \".contact-form__response-success, .contact-form__response-error\"\r\n      ).removeClass(\"active\");\r\n\r\n      $.ajax({\r\n        url,\r\n        type: method,\r\n        data: serialized,\r\n        success: function(data) {\r\n          $(\".contact-form__response-success\").addClass(\"active\");\r\n        },\r\n        error: function(data) {\r\n          $(\".contact-form__response-error\").addClass(\"active\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // Branches table load more\r\n    let branchStep = 1;\r\n    const branchLimit = 9;\r\n    const branchItems = $(\".branches-table__content .row\");\r\n\r\n    if (branchItems.length > 0) {\r\n      hideExtraBranches(branchStep, branchLimit);\r\n      $(\"#loadBranchesBtn\").on(\"click\", function() {\r\n        branchStep += 1;\r\n        hideExtraBranches(branchStep, branchLimit);\r\n        if (!$(\".branches-table__content .row\").hasClass(\"d-none\")) {\r\n          $(this).addClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    function hideExtraBranches(step, limit) {\r\n      branchItems.each(function(index) {\r\n        const stepLimit = step * limit;\r\n        if (index + 1 > stepLimit) {\r\n          $(this).addClass(\"d-none\");\r\n        } else {\r\n          $(this).removeClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    // Branches search\r\n\r\n    $(\"#branchesSearch\").on(\"keyup change\", function() {\r\n      const searchValue = $(this).val()\r\n        ? $(this)\r\n            .val()\r\n            .toLowerCase()\r\n        : null;\r\n      if (!searchValue) {\r\n        branchStep = 1;\r\n        hideExtraBranches(branchStep, branchLimit);\r\n        $(\"#loadBranchesBtn\").removeClass(\"d-none\");\r\n        return;\r\n      }\r\n      $(\"#loadBranchesBtn\").addClass(\"d-none\");\r\n      branchItems.each(function() {\r\n        let contentValue = \"\";\r\n        $(this)\r\n          .find(\".branches-table__for-search\")\r\n          .each(function() {\r\n            contentValue = $(this)\r\n              .text()\r\n              .trim();\r\n          });\r\n\r\n        // filter\r\n        const result = contentValue.toLowerCase().indexOf(searchValue) > -1;\r\n        if (result) {\r\n          $(this).removeClass(\"d-none\");\r\n        } else {\r\n          $(this).addClass(\"d-none\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // On resize\r\n    resizeHander();\r\n    window.addEventListener(\"resize\", function(event) {\r\n      resizeHander();\r\n    });\r\n\r\n    // Read more for mobile version\r\n    $(\"#aboutReadMoreBtn\").on(\"click\", function() {\r\n      $(\".about-section__text\").removeClass(\"d-none\");\r\n      $(\".about-section__text-truncated\").remove();\r\n      $(this).addClass(\"activated\");\r\n    });\r\n\r\n    function resizeHander() {\r\n      // About section read more on mobile\r\n      if ($(\"#aboutReadMoreBtn\").hasClass(\"activated\")) {\r\n        return;\r\n      }\r\n      const windowWidth = window.innerWidth;\r\n      if (windowWidth <= 768) {\r\n        $(\"#branchesSearch\").attr(\"placeholder\", \"Поиск по городу\");\r\n\r\n        if ($(\".about-section__text-truncated\").length === 0) {\r\n          $(\".about-section__text\").addClass(\"d-none\");\r\n          const truncated =\r\n            $(\".about-section__text\")\r\n              .text()\r\n              .trim()\r\n              .slice(0, 177) + \" ...\";\r\n\r\n          $(\".about-section__text\")\r\n            .clone()\r\n            .attr(\"class\", \"about-section__text-truncated\")\r\n            .html(truncated)\r\n            .appendTo($(\".about-section__text-wrapper\"));\r\n        } else {\r\n          $(\".about-section__text\").addClass(\"d-none\");\r\n          $(\".about-section__text-truncated\").removeClass(\"d-none\");\r\n        }\r\n      } else {\r\n        $(\"#branchesSearch\").attr(\r\n          \"placeholder\",\r\n          \"Узнайте, есть ли наш филиал в вашем городе...\"\r\n        );\r\n        $(\".about-section__text\").removeClass(\"d-none\");\r\n        $(\".about-section__text-truncated\").addClass(\"d-none\");\r\n      }\r\n    }\r\n  });\r\n\r\n  // Smooth anchor scroll\r\n  document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n    anchor.addEventListener(\"click\", function(e) {\r\n      if (this.getAttribute(\"href\") === \"#\") {\r\n        return;\r\n      }\r\n      e.preventDefault();\r\n      document.querySelector(this.getAttribute(\"href\")).scrollIntoView({\r\n        behavior: \"smooth\"\r\n      });\r\n    });\r\n  });\r\n})(jQuery);\r\n"]}