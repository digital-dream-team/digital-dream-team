{"version":3,"sources":["jquery.lazy.js"],"names":["window","undefined","$","jQuery","Zepto","lazyInstanceId","windowLoaded","_executeLazy","instance","config","items","events","namespace","_awaitingAfterLoad","_actualWidth","_actualHeight","_isRetinaDisplay","_afterLoad","_load","_error","_img","_src","_srcset","_sizes","_backgroundImage","_initialize","devicePixelRatio","_prepareItems","setTimeout","delay","combined","e","callback","timeout","lastExecute","event","ignoreThrottle","elapsed","Date","run","call","clearTimeout","enableThrottle","_triggerCallback","_throttle","throttle","_lazyLoadItems","all","a","additionalItems","push","g","filter","data","loadedName","f","forcedItems","length","i","item","this","appendScroll","on","element","defaultImage","placeholder","imageBase","forcedTags","_getElementTagName","handledName","attr","attribute","srcsetAttribute","loaderAttribute","tag","name","l","elementImageBase","imageBaseAttribute","_getCorrectedSrcSet","css","allItems","forced","autoDestroy","elements","customLoader","visibleOnly","is","loadTriggered","_handleItem","destroy","errorCallback","noop","srcAttribute","retinaAttribute","loadCallback","removeAttribute","sizesAttribute","elementRetina","_reduceAwaiting","removeAttr","off","one","imageObj","response","trigger","Image","hide","effect","effectTime","elementBound","getBoundingClientRect","remove","imageSrc","horizontal","complete","_isInLoadableArea","direction","scrollDirection","threshold","vertical","height","top","bottom","width","left","right","tagName","toLowerCase","srcset","entries","split","trim","LazyPlugin","settings","args","apply","slice","arguments","bind","_instance","_config","extend","_events","getItems","entryName","value","addItems","type","update","useThrottle","force","loadAll","_namespace","chainable","fn","Lazy","lazy","names","loader","isFunction","isArray","prototype","_f","c","beforeLoad","onFinishedAll","afterLoad","onError"],"mappings":"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","file":"jquery.lazy.min.js","sourcesContent":["/*!\n * jQuery & Zepto Lazy - v1.7.10\n * http://jquery.eisbehr.de/lazy/\n *\n * Copyright 2012 - 2018, Daniel 'Eisbehr' Kern\n *\n * Dual licensed under the MIT and GPL-2.0 licenses:\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.gnu.org/licenses/gpl-2.0.html\n *\n * $(\"img.lazy\").lazy();\n */\n\n;(function(window, undefined) {\n    \"use strict\";\n\n    // noinspection JSUnresolvedVariable\n    /**\n     * library instance - here and not in construct to be shorter in minimization\n     * @return void\n     */\n    var $ = window.jQuery || window.Zepto,\n\n    /**\n     * unique plugin instance id counter\n     * @type {number}\n     */\n    lazyInstanceId = 0,\n\n    /**\n     * helper to register window load for jQuery 3\n     * @type {boolean}\n     */    \n    windowLoaded = false;\n\n    /**\n     * make lazy available to jquery - and make it a bit more case-insensitive :)\n     * @access public\n     * @type {function}\n     * @param {object} settings\n     * @return {LazyPlugin}\n     */\n    $.fn.Lazy = $.fn.lazy = function(settings) {\n        return new LazyPlugin(this, settings);\n    };\n\n    /**\n     * helper to add plugins to lazy prototype configuration\n     * @access public\n     * @type {function}\n     * @param {string|Array} names\n     * @param {string|Array|function} [elements]\n     * @param {function} loader\n     * @return void\n     */\n    $.Lazy = $.lazy = function(names, elements, loader) {\n        // make second parameter optional\n        if ($.isFunction(elements)) {\n            loader = elements;\n            elements = [];\n        }\n\n        // exit here if parameter is not a callable function\n        if (!$.isFunction(loader)) {\n            return;\n        }\n\n        // make parameters an array of names to be sure\n        names = $.isArray(names) ? names : [names];\n        elements = $.isArray(elements) ? elements : [elements];\n\n        var config = LazyPlugin.prototype.config,\n            forced = config._f || (config._f = {});\n\n        // add the loader plugin for every name\n        for (var i = 0, l = names.length; i < l; i++) {\n            if (config[names[i]] === undefined || $.isFunction(config[names[i]])) {\n                config[names[i]] = loader;\n            }\n        }\n\n        // add forced elements loader\n        for (var c = 0, a = elements.length; c < a; c++) {\n            forced[elements[c]] = names[0];\n        }\n    };\n\n    /**\n     * contains all logic and the whole element handling\n     * is packed in a private function outside class to reduce memory usage, because it will not be created on every plugin instance\n     * @access private\n     * @type {function}\n     * @param {LazyPlugin} instance\n     * @param {object} config\n     * @param {object|Array} items\n     * @param {object} events\n     * @param {string} namespace\n     * @return void\n     */\n    function _executeLazy(instance, config, items, events, namespace) {\n        /**\n         * a helper to trigger the 'onFinishedAll' callback after all other events\n         * @access private\n         * @type {number}\n         */\n        var _awaitingAfterLoad = 0,\n\n        /**\n         * visible content width\n         * @access private\n         * @type {number}\n         */\n        _actualWidth = -1,\n\n        /**\n         * visible content height\n         * @access private\n         * @type {number}\n         */\n        _actualHeight = -1,\n\n        /**\n         * determine possibly detected high pixel density\n         * @access private\n         * @type {boolean}\n         */\n        _isRetinaDisplay = false, \n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _afterLoad = 'afterLoad',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _load = 'load',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _error = 'error',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _img = 'img',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _src = 'src',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _srcset = 'srcset',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _sizes = 'sizes',\n\n        /**\n         * dictionary entry for better minimization\n         * @access private\n         * @type {string}\n         */\n        _backgroundImage = 'background-image';\n\n        /**\n         * initialize plugin\n         * bind loading to events or set delay time to load all items at once\n         * @access private\n         * @return void\n         */\n        function _initialize() {\n            // detect actual device pixel ratio\n            // noinspection JSUnresolvedVariable\n            _isRetinaDisplay = window.devicePixelRatio > 1;\n\n            // prepare all initial items\n            items = _prepareItems(items);\n\n            // if delay time is set load all items at once after delay time\n            if (config.delay >= 0) {\n                setTimeout(function() {\n                    _lazyLoadItems(true);\n                }, config.delay);\n            }\n\n            // if no delay is set or combine usage is active bind events\n            if (config.delay < 0 || config.combined) {\n                // create unique event function\n                events.e = _throttle(config.throttle, function(event) {\n                    // reset detected window size on resize event\n                    if (event.type === 'resize') {\n                        _actualWidth = _actualHeight = -1;\n                    }\n\n                    // execute 'lazy magic'\n                    _lazyLoadItems(event.all);\n                });\n\n                // create function to add new items to instance\n                events.a = function(additionalItems) {\n                    additionalItems = _prepareItems(additionalItems);\n                    items.push.apply(items, additionalItems);\n                };\n\n                // create function to get all instance items left\n                events.g = function() {\n                    // filter loaded items before return in case internal filter was not running until now\n                    return (items = $(items).filter(function() {\n                        return !$(this).data(config.loadedName);\n                    }));\n                };\n\n                // create function to force loading elements\n                events.f = function(forcedItems) {\n                    for (var i = 0; i < forcedItems.length; i++) {\n                        // only handle item if available in current instance\n                        // use a compare function, because Zepto can't handle object parameter for filter\n                        // var item = items.filter(forcedItems[i]);\n                        /* jshint loopfunc: true */\n                        var item = items.filter(function() {\n                            return this === forcedItems[i];\n                        });\n\n                        if (item.length) {\n                            _lazyLoadItems(false, item);   \n                        }\n                    }\n                };\n\n                // load initial items\n                _lazyLoadItems();\n\n                // bind lazy load functions to scroll and resize event\n                // noinspection JSUnresolvedVariable\n                $(config.appendScroll).on('scroll.' + namespace + ' resize.' + namespace, events.e);\n            }\n        }\n\n        /**\n         * prepare items before handle them\n         * @access private\n         * @param {Array|object|jQuery} items\n         * @return {Array|object|jQuery}\n         */\n        function _prepareItems(items) {\n            // fetch used configurations before loops\n            var defaultImage = config.defaultImage,\n                placeholder = config.placeholder,\n                imageBase = config.imageBase,\n                srcsetAttribute = config.srcsetAttribute,\n                loaderAttribute = config.loaderAttribute,\n                forcedTags = config._f || {};\n\n            // filter items and only add those who not handled yet and got needed attributes available\n            items = $(items).filter(function() {\n                var element = $(this),\n                    tag = _getElementTagName(this);\n\n                return !element.data(config.handledName) && \n                       (element.attr(config.attribute) || element.attr(srcsetAttribute) || element.attr(loaderAttribute) || forcedTags[tag] !== undefined);\n            })\n\n            // append plugin instance to all elements\n            .data('plugin_' + config.name, instance);\n\n            for (var i = 0, l = items.length; i < l; i++) {\n                var element = $(items[i]),\n                    tag = _getElementTagName(items[i]),\n                    elementImageBase = element.attr(config.imageBaseAttribute) || imageBase;\n\n                // generate and update source set if an image base is set\n                if (tag === _img && elementImageBase && element.attr(srcsetAttribute)) {\n                    element.attr(srcsetAttribute, _getCorrectedSrcSet(element.attr(srcsetAttribute), elementImageBase));\n                }\n\n                // add loader to forced element types\n                if (forcedTags[tag] !== undefined && !element.attr(loaderAttribute)) {\n                    element.attr(loaderAttribute, forcedTags[tag]);\n                }\n\n                // set default image on every element without source\n                if (tag === _img && defaultImage && !element.attr(_src)) {\n                    element.attr(_src, defaultImage);\n                }\n\n                // set placeholder on every element without background image\n                else if (tag !== _img && placeholder && (!element.css(_backgroundImage) || element.css(_backgroundImage) === 'none')) {\n                    element.css(_backgroundImage, \"url('\" + placeholder + \"')\");\n                }\n            }\n\n            return items;\n        }\n\n        /**\n         * the 'lazy magic' - check all items\n         * @access private\n         * @param {boolean} [allItems]\n         * @param {object} [forced]\n         * @return void\n         */\n        function _lazyLoadItems(allItems, forced) {\n            // skip if no items where left\n            if (!items.length) {\n                // destroy instance if option is enabled\n                if (config.autoDestroy) {\n                    // noinspection JSUnresolvedFunction\n                    instance.destroy();\n                }\n\n                return;\n            }\n\n            var elements = forced || items,\n                loadTriggered = false,\n                imageBase = config.imageBase || '',\n                srcsetAttribute = config.srcsetAttribute,\n                handledName = config.handledName;\n\n            // loop all available items\n            for (var i = 0; i < elements.length; i++) {\n                // item is at least in loadable area\n                if (allItems || forced || _isInLoadableArea(elements[i])) {\n                    var element = $(elements[i]),\n                        tag = _getElementTagName(elements[i]),\n                        attribute = element.attr(config.attribute),\n                        elementImageBase = element.attr(config.imageBaseAttribute) || imageBase,\n                        customLoader = element.attr(config.loaderAttribute);\n\n                        // is not already handled \n                    if (!element.data(handledName) &&\n                        // and is visible or visibility doesn't matter\n                        (!config.visibleOnly || element.is(':visible')) && (\n                        // and image source or source set attribute is available\n                        (attribute || element.attr(srcsetAttribute)) && (\n                            // and is image tag where attribute is not equal source or source set\n                            (tag === _img && (elementImageBase + attribute !== element.attr(_src) || element.attr(srcsetAttribute) !== element.attr(_srcset))) ||\n                            // or is non image tag where attribute is not equal background\n                            (tag !== _img && elementImageBase + attribute !== element.css(_backgroundImage))\n                        ) ||\n                        // or custom loader is available\n                        customLoader))\n                    {\n                        // mark element always as handled as this point to prevent double handling\n                        loadTriggered = true;\n                        element.data(handledName, true);\n\n                        // load item\n                        _handleItem(element, tag, elementImageBase, customLoader);\n                    }\n                }\n            }\n\n            // when something was loaded remove them from remaining items\n            if (loadTriggered) {\n                items = $(items).filter(function() {\n                    return !$(this).data(handledName);\n                });\n            }\n        }\n\n        /**\n         * load the given element the lazy way\n         * @access private\n         * @param {object} element\n         * @param {string} tag\n         * @param {string} imageBase\n         * @param {function} [customLoader]\n         * @return void\n         */\n        function _handleItem(element, tag, imageBase, customLoader) {\n            // increment count of items waiting for after load\n            ++_awaitingAfterLoad;\n\n            // extended error callback for correct 'onFinishedAll' handling\n            var errorCallback = function() {\n                _triggerCallback('onError', element);\n                _reduceAwaiting();\n\n                // prevent further callback calls\n                errorCallback = $.noop;\n            };\n\n            // trigger function before loading image\n            _triggerCallback('beforeLoad', element);\n\n            // fetch all double used data here for better code minimization\n            var srcAttribute = config.attribute,\n                srcsetAttribute = config.srcsetAttribute,\n                sizesAttribute = config.sizesAttribute,\n                retinaAttribute = config.retinaAttribute,\n                removeAttribute = config.removeAttribute,\n                loadedName = config.loadedName,\n                elementRetina = element.attr(retinaAttribute);\n\n            // handle custom loader\n            if (customLoader) {\n                // on load callback\n                var loadCallback = function() {\n                    // remove attribute from element\n                    if (removeAttribute) {\n                        element.removeAttr(config.loaderAttribute);\n                    }\n\n                    // mark element as loaded\n                    element.data(loadedName, true);\n\n                    // call after load event\n                    _triggerCallback(_afterLoad, element);\n\n                    // remove item from waiting queue and possibly trigger finished event\n                    // it's needed to be asynchronous to run after filter was in _lazyLoadItems\n                    setTimeout(_reduceAwaiting, 1);\n\n                    // prevent further callback calls\n                    loadCallback = $.noop;\n                };\n\n                // bind error event to trigger callback and reduce waiting amount\n                element.off(_error).one(_error, errorCallback)\n\n                // bind after load callback to element\n                .one(_load, loadCallback);\n\n                // trigger custom loader and handle response\n                if (!_triggerCallback(customLoader, element, function(response) {\n                    if(response) {\n                        element.off(_load);\n                        loadCallback();\n                    }\n                    else {\n                        element.off(_error);\n                        errorCallback();\n                    }\n                })) {\n                    element.trigger(_error);\n                }\n            }\n\n            // handle images\n            else {\n                // create image object\n                var imageObj = $(new Image());\n\n                // bind error event to trigger callback and reduce waiting amount\n                imageObj.one(_error, errorCallback)\n\n                // bind after load callback to image\n                .one(_load, function() {\n                    // remove element from view\n                    element.hide();\n\n                    // set image back to element\n                    // do it as single 'attr' calls, to be sure 'src' is set after 'srcset'\n                    if (tag === _img) {\n                        element.attr(_sizes, imageObj.attr(_sizes))\n                               .attr(_srcset, imageObj.attr(_srcset))\n                               .attr(_src, imageObj.attr(_src));\n                    }\n                    else {\n                        element.css(_backgroundImage, \"url('\" + imageObj.attr(_src) + \"')\");\n                    }\n\n                    // bring it back with some effect!\n                    element[config.effect](config.effectTime);\n\n                    // remove attribute from element\n                    if (removeAttribute) {\n                        element.removeAttr(srcAttribute + ' ' + srcsetAttribute + ' ' + retinaAttribute + ' ' + config.imageBaseAttribute);\n\n                        // only remove 'sizes' attribute, if it was a custom one\n                        if (sizesAttribute !== _sizes) {\n                            element.removeAttr(sizesAttribute);\n                        }\n                    }\n\n                    // mark element as loaded\n                    element.data(loadedName, true);\n\n                    // call after load event\n                    _triggerCallback(_afterLoad, element);\n\n                    // cleanup image object\n                    imageObj.remove();\n\n                    // remove item from waiting queue and possibly trigger finished event\n                    _reduceAwaiting();\n                });\n\n                // set sources\n                // do it as single 'attr' calls, to be sure 'src' is set after 'srcset'\n                var imageSrc = (_isRetinaDisplay && elementRetina ? elementRetina : element.attr(srcAttribute)) || '';\n                imageObj.attr(_sizes, element.attr(sizesAttribute))\n                        .attr(_srcset, element.attr(srcsetAttribute))\n                        .attr(_src, imageSrc ? imageBase + imageSrc : null);\n\n                // call after load even on cached image\n                imageObj.complete && imageObj.trigger(_load); // jshint ignore : line\n            }\n        }\n\n        /**\n         * check if the given element is inside the current viewport or threshold\n         * @access private\n         * @param {object} element\n         * @return {boolean}\n         */\n        function _isInLoadableArea(element) {\n            var elementBound = element.getBoundingClientRect(),\n                direction    = config.scrollDirection,\n                threshold    = config.threshold,\n                vertical     = // check if element is in loadable area from top\n                               ((_getActualHeight() + threshold) > elementBound.top) &&\n                               // check if element is even in loadable are from bottom\n                               (-threshold < elementBound.bottom),\n                horizontal   = // check if element is in loadable area from left\n                               ((_getActualWidth() + threshold) > elementBound.left) &&\n                               // check if element is even in loadable area from right\n                               (-threshold < elementBound.right);\n\n            if (direction === 'vertical') {\n                return vertical;\n            }\n            else if (direction === 'horizontal') {\n                return horizontal;\n            }\n\n            return vertical && horizontal;\n        }\n\n        /**\n         * receive the current viewed width of the browser\n         * @access private\n         * @return {number}\n         */\n        function _getActualWidth() {\n            return _actualWidth >= 0 ? _actualWidth : (_actualWidth = $(window).width());\n        }\n\n        /**\n         * receive the current viewed height of the browser\n         * @access private\n         * @return {number}\n         */\n        function _getActualHeight() {\n            return _actualHeight >= 0 ? _actualHeight : (_actualHeight = $(window).height());\n        }\n\n        /**\n         * get lowercase tag name of an element\n         * @access private\n         * @param {object} element\n         * @returns {string}\n         */\n        function _getElementTagName(element) {\n            return element.tagName.toLowerCase();\n        }\n\n        /**\n         * prepend image base to all srcset entries\n         * @access private\n         * @param {string} srcset\n         * @param {string} imageBase\n         * @returns {string}\n         */\n        function _getCorrectedSrcSet(srcset, imageBase) {\n            if (imageBase) {\n                // trim, remove unnecessary spaces and split entries\n                var entries = srcset.split(',');\n                srcset = '';\n\n                for (var i = 0, l = entries.length; i < l; i++) {\n                    srcset += imageBase + entries[i].trim() + (i !== l - 1 ? ',' : '');\n                }\n            }\n\n            return srcset;\n        }\n\n        /**\n         * helper function to throttle down event triggering\n         * @access private\n         * @param {number} delay\n         * @param {function} callback\n         * @return {function}\n         */\n        function _throttle(delay, callback) {\n            var timeout,\n                lastExecute = 0;\n\n            return function(event, ignoreThrottle) {\n                var elapsed = +new Date() - lastExecute;\n\n                function run() {\n                    lastExecute = +new Date();\n                    // noinspection JSUnresolvedFunction\n                    callback.call(instance, event);\n                }\n\n                timeout && clearTimeout(timeout); // jshint ignore : line\n\n                if (elapsed > delay || !config.enableThrottle || ignoreThrottle) {\n                    run();\n                }\n                else {\n                    timeout = setTimeout(run, delay - elapsed);\n                }\n            };\n        }\n\n        /**\n         * reduce count of awaiting elements to 'afterLoad' event and fire 'onFinishedAll' if reached zero\n         * @access private\n         * @return void\n         */\n        function _reduceAwaiting() {\n            --_awaitingAfterLoad;\n\n            // if no items were left trigger finished event\n            if (!items.length && !_awaitingAfterLoad) {\n                _triggerCallback('onFinishedAll');\n            }\n        }\n\n        /**\n         * single implementation to handle callbacks, pass element and set 'this' to current instance\n         * @access private\n         * @param {string|function} callback\n         * @param {object} [element]\n         * @param {*} [args]\n         * @return {boolean}\n         */\n        function _triggerCallback(callback, element, args) {\n            if ((callback = config[callback])) {\n                // jQuery's internal '$(arguments).slice(1)' are causing problems at least on old iPads\n                // below is shorthand of 'Array.prototype.slice.call(arguments, 1)'\n                callback.apply(instance, [].slice.call(arguments, 1));\n                return true;\n            }\n\n            return false;\n        }\n\n        // if event driven or window is already loaded don't wait for page loading\n        if (config.bind === 'event' || windowLoaded) {\n            _initialize();\n        }\n\n        // otherwise load initial items and start lazy after page load\n        else {\n            // noinspection JSUnresolvedVariable\n            $(window).on(_load + '.' + namespace, _initialize);\n        }  \n    }\n\n    /**\n     * lazy plugin class constructor\n     * @constructor\n     * @access private\n     * @param {object} elements\n     * @param {object} settings\n     * @return {object|LazyPlugin}\n     */\n    function LazyPlugin(elements, settings) {\n        /**\n         * this lazy plugin instance\n         * @access private\n         * @type {object|LazyPlugin|LazyPlugin.prototype}\n         */\n        var _instance = this,\n\n        /**\n         * this lazy plugin instance configuration\n         * @access private\n         * @type {object}\n         */\n        _config = $.extend({}, _instance.config, settings),\n\n        /**\n         * instance generated event executed on container scroll or resize\n         * packed in an object to be referenceable and short named because properties will not be minified\n         * @access private\n         * @type {object}\n         */\n        _events = {},\n\n        /**\n         * unique namespace for instance related events\n         * @access private\n         * @type {string}\n         */\n        _namespace = _config.name + '-' + (++lazyInstanceId);\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * wrapper to get or set an entry from plugin instance configuration\n         * much smaller on minify as direct access\n         * @access public\n         * @type {function}\n         * @param {string} entryName\n         * @param {*} [value]\n         * @return {LazyPlugin|*}\n         */\n        _instance.config = function(entryName, value) {\n            if (value === undefined) {\n                return _config[entryName];\n            }\n\n            _config[entryName] = value;\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * add additional items to current instance\n         * @access public\n         * @param {Array|object|string} items\n         * @return {LazyPlugin}\n         */\n        _instance.addItems = function(items) {\n            _events.a && _events.a($.type(items) === 'string' ? $(items) : items); // jshint ignore : line\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * get all left items of this instance\n         * @access public\n         * @returns {object}\n         */\n        _instance.getItems = function() {\n            return _events.g ? _events.g() : {};\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * force lazy to load all items in loadable area right now\n         * by default without throttle\n         * @access public\n         * @type {function}\n         * @param {boolean} [useThrottle]\n         * @return {LazyPlugin}\n         */\n        _instance.update = function(useThrottle) {\n            _events.e && _events.e({}, !useThrottle); // jshint ignore : line\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * force element(s) to load directly, ignoring the viewport\n         * @access public\n         * @param {Array|object|string} items\n         * @return {LazyPlugin}\n         */\n        _instance.force = function(items) {\n            _events.f && _events.f($.type(items) === 'string' ? $(items) : items); // jshint ignore : line\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * force lazy to load all available items right now\n         * this call ignores throttling\n         * @access public\n         * @type {function}\n         * @return {LazyPlugin}\n         */\n        _instance.loadAll = function() {\n            _events.e && _events.e({all: true}, true); // jshint ignore : line\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * destroy this plugin instance\n         * @access public\n         * @type {function}\n         * @return undefined\n         */\n        _instance.destroy = function() {\n            // unbind instance generated events\n            // noinspection JSUnresolvedFunction, JSUnresolvedVariable\n            $(_config.appendScroll).off('.' + _namespace, _events.e);\n            // noinspection JSUnresolvedVariable\n            $(window).off('.' + _namespace);\n\n            // clear events\n            _events = {};\n\n            return undefined;\n        };\n\n        // start using lazy and return all elements to be chainable or instance for further use\n        // noinspection JSUnresolvedVariable\n        _executeLazy(_instance, _config, elements, _events, _namespace);\n        return _config.chainable ? elements : _instance;\n    }\n\n    /**\n     * settings and configuration data\n     * @access public\n     * @type {object|*}\n     */\n    LazyPlugin.prototype.config = {\n        // general\n        name               : 'lazy',\n        chainable          : true,\n        autoDestroy        : true,\n        bind               : 'load',\n        threshold          : 500,\n        visibleOnly        : false,\n        appendScroll       : window,\n        scrollDirection    : 'both',\n        imageBase          : null,\n        defaultImage       : 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',\n        placeholder        : null,\n        delay              : -1,\n        combined           : false,\n\n        // attributes\n        attribute          : 'data-src',\n        srcsetAttribute    : 'data-srcset',\n        sizesAttribute     : 'data-sizes',\n        retinaAttribute    : 'data-retina',\n        loaderAttribute    : 'data-loader',\n        imageBaseAttribute : 'data-imagebase',\n        removeAttribute    : true,\n        handledName        : 'handled',\n        loadedName         : 'loaded',\n\n        // effect\n        effect             : 'show',\n        effectTime         : 0,\n\n        // throttle\n        enableThrottle     : true,\n        throttle           : 250,\n\n        // callbacks\n        beforeLoad         : undefined,\n        afterLoad          : undefined,\n        onError            : undefined,\n        onFinishedAll      : undefined\n    };\n\n    // register window load event globally to prevent not loading elements\n    // since jQuery 3.X ready state is fully async and may be executed after 'load' \n    $(window).on('load', function() {\n        windowLoaded = true;\n    });\n})(window);"]}