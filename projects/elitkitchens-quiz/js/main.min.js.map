{"version":3,"sources":["main.js"],"names":["qzNumberWithSpaces","x","parts","toString","split","replace","join","$","circle","r","baseVal","value","Math","PI","style","strokeDasharray","strokeDashoffset","percent","circumference","offset","radius","concat","this","closest","find","prop","on","radio","tabsAmount","length","html","currentTab","setProgress","tabsCommon","parent","hasClass","val","addClass","removeClass","jQuery","defaultRangeVal","preventDefault","e","ajax","url","attr","method","serialized","serialize","success","data","error","alert","console"],"mappings":"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","file":"main.min.js","sourcesContent":["(function ($) {\r\n  // Document ready\r\n  $(function () {\r\n    let circle = $(\".progress-ring__circle\")[0];\r\n    let radius = circle.r.baseVal.value;\r\n    let circumference = radius * 2 * Math.PI;\r\n    circle.style.strokeDasharray = `${circumference} ${circumference}`;\r\n    circle.style.strokeDashoffset = `${circumference}`;\r\n    function setProgress(percent) {\r\n      const offset = circumference - (percent / 100) * circumference;\r\n      circle.style.strokeDashoffset = offset;\r\n    }\r\n\r\n    $(\".quiz-card__button\").on(\"click\", function () {\r\n      const parent = $(this).closest(\".quiz-card-wrap\");\r\n      const radio = parent.find('input[type=\"radio\"]');\r\n      radio.prop(\"checked\", true);\r\n    });\r\n\r\n    let currentTab = 1;\r\n    let tabsAmount = $(\".quiz-tab.quiz-tab--question\").length;\r\n    $(\".quiz-step__current\").html(currentTab);\r\n    $(\".quiz-step__total\").html(tabsAmount);\r\n    setProgress((currentTab / tabsAmount) * 100);\r\n\r\n    $(\"#quizBack\").on(\"click\", function () {\r\n      // Change tab index\r\n      if (currentTab - 1 >= 1) {\r\n        currentTab--;\r\n      }\r\n\r\n      tabsCommon();\r\n    });\r\n    $(\"#quizForward\").on(\"click\", function () {\r\n      // Check if radio selected to continue\r\n      const parent = $(`.quiz-tab[data-tab='${currentTab}']`);\r\n      if (parent.hasClass(\"quiz-tab--radio\")) {\r\n        const radio = parent.find('input[type=\"radio\"]:checked');\r\n        if (radio.length === 0) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Change tab index\r\n      if (currentTab + 1 <= tabsAmount) {\r\n        currentTab++;\r\n      }\r\n\r\n      tabsCommon();\r\n    });\r\n\r\n    const defaultRangeVal = $(\".quiz-range\").val();\r\n    $(\".quiz-range\")\r\n      .closest(\".quiz-range-wrap\")\r\n      .find(\".quiz-range__value-text\")\r\n      .html(qzNumberWithSpaces(defaultRangeVal));\r\n    $(\".quiz-range\").on(\"input change\", function () {\r\n      const val = $(this).val();\r\n      $(\".quiz-range\")\r\n        .closest(\".quiz-range-wrap\")\r\n        .find(\".quiz-range__value-text\")\r\n        .html(qzNumberWithSpaces(val));\r\n    });\r\n\r\n    $(\"#quizForm\").on(\"submit\", function (e) {\r\n      e.preventDefault();\r\n      const url = $(this).attr(\"action\");\r\n      const method = $(this).attr(\"method\");\r\n      const serialized = $(this).serialize();\r\n\r\n      // const serialized = $(this).serializeArray();\r\n\r\n      $.ajax({\r\n        url,\r\n        type: method,\r\n        data: {\r\n          action: \"quizForm\",\r\n          serialized,\r\n        },\r\n        success: function (data) {\r\n          $(\".quiz-form-wrap\").addClass(\"d-none\");\r\n          $(\".quiz-result\").removeClass(\"d-none\");\r\n        },\r\n        error: function (data) {\r\n          alert(\"Ошибка, повторите позднее\");\r\n          console.error(data);\r\n        },\r\n      });\r\n    });\r\n\r\n    $(\"#quizRepeat\").on(\"click\", function () {\r\n      // Reset tabs\r\n      $(\".quiz-form-wrap\").removeClass(\"d-none\");\r\n      $(\".quiz-result\").addClass(\"d-none\");\r\n      currentTab = 1;\r\n      tabsCommon();\r\n\r\n      // reset inputs\r\n      $(\"#quizForm\").find('input[type=\"text\"], input[type=\"tel\"]').val(\"\");\r\n\r\n      // reset radios\r\n      $(\"#quizForm\").find('input[type=\"radio\"]').prop(\"checked\", false);\r\n\r\n      // reset range\r\n      $(\"#quizForm\").find('input[type=\"range\"]').val(defaultRangeVal);\r\n      $(\".quiz-range\")\r\n        .closest(\".quiz-range-wrap\")\r\n        .find(\".quiz-range__value-text\")\r\n        .html(qzNumberWithSpaces(defaultRangeVal));\r\n    });\r\n\r\n    function tabsCommon() {\r\n      // Change submit button\r\n      if (currentTab === tabsAmount) {\r\n        $(\"#quizForward\").addClass(\"d-none\");\r\n        $(\"#quizSubmit\").removeClass(\"d-none\");\r\n      } else {\r\n        $(\"#quizForward\").removeClass(\"d-none\");\r\n        $(\"#quizSubmit\").addClass(\"d-none\");\r\n      }\r\n\r\n      // Change progress circle\r\n      setProgress((currentTab / tabsAmount) * 100);\r\n\r\n      // Change step value\r\n      $(\".quiz-step__current\").html(currentTab);\r\n\r\n      // Switch tab class\r\n      $(\".quiz-tab\").removeClass(\"active\");\r\n      $(\".quiz-tabs\")\r\n        .find(`.quiz-tab[data-tab='${currentTab}']`)\r\n        .addClass(\"active\");\r\n\r\n      // Disable back button if first tab\r\n      if (currentTab <= 1) {\r\n        $(\"#quizBack\").prop(\"disabled\", true);\r\n      } else {\r\n        $(\"#quizBack\").prop(\"disabled\", false);\r\n      }\r\n    }\r\n  });\r\n})(jQuery);\r\n\r\nfunction qzNumberWithSpaces(x) {\r\n  var parts = x.toString().split(\".\");\r\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n  return parts.join(\".\");\r\n}\r\n"]}