"use strict";!function(l){l(document).ready(function(){if(l(".checkout-form__region-dropdown-btn").each(function(e){if(0===e){var t=l(this).data("region-id");l(".form-select-group__select").hide(),l(".form-select-group__select[data-region-id='"+t+"']").show()}}),l(".checkout-form").length){if(l(".phone-confirmation__phone-group-confirm-btn").on("click",function(){l(this).closest(".phone-confirmation").addClass("phone-confirmation--active")}),l(".phone-confirmation__code-group input").on("change textInput input",function(){var e=l(this).closest(".phone-confirmation__code-group");""===l(this).val()?e.removeClass("phone-confirmation__code-group--active"):e.addClass("phone-confirmation__code-group--active")}),l(".phone-confirmation__code-group-confirm-btn").on("click",function(){var e=l(this).closest(".phone-confirmation");e.removeClass("phone-confirmation--success phone-confirmation--invalid");e.find(".phone-confirmation__phone-group input").val();var t=e.find(".phone-confirmation__code-group input").val();t.length<2?e.addClass("phone-confirmation--invalid"):e.addClass("phone-confirmation--success")}),l(".form-select-group__select").on("click",function(e){l(this).find('input[type="radio"]').prop("checked",!0);l('input[name="pickup_address"]:checked').val();l(".form-select-group__select").removeClass("active"),l(this).addClass("active")}),l(".form-select-group__select a").on("click",function(e){e.stopPropagation()}),l(".checkout-form__region-dropdown-btn").each(function(e){if(0===e){var t=l(this).data("region-id");l(".form-select-group__select").hide(),l(".form-select-group__select[data-region-id='"+t+"']").show()}}),l(".checkout-form__region-dropdown-btn").on("click",function(e){e.preventDefault();var t=l(this).closest(".checkout-form__region-dropdown"),i=l(this).text().trim(),a=l(this).data("region-id");t.find(".checkout-form__region-dropdown-value").html(i),l(".checkout-form__region-input").val(i),l('input[name="pickup_address"]').prop("checked",!1),l(".form-select-group__select-btn").parent().removeClass("active"),l(".form-select-group__select").hide(),l(".form-select-group__select[data-region-id='"+a+"']").show()}),l('input[name="delivery_type"]').length){var e=l('input[name="delivery_type"]:checked').val();l('input[name="delivery_type"]').on("change",function(){"pickup"===(e=l(this).val())?(l(".checkout-form__delivery-type-hint--1").addClass("d-none"),l(".checkout-form__delivery-types-tab-pickup").addClass("active"),l(".checkout-form__delivery-types-tab-address").removeClass("active")):"home"===e&&(l(".checkout-form__delivery-type-hint--1").removeClass("d-none"),l(".checkout-form__delivery-types-tab-address").addClass("active"),l(".checkout-form__delivery-types-tab-pickup").removeClass("active"))})}if(l('input[name="payment_type"]').length){var t=l('input[name="payment_type"]:checked').val();l('input[name="payment_type"]').on("change",function(){"on_delivery"===(t=l(this).val())?l(".checkout-form__payment-type-hint--1").addClass("d-none"):"online"===t&&l(".checkout-form__payment-type-hint--1").removeClass("d-none")})}}function n(e,t){var i=l("#".concat(e));if(i){var a=i.find('.stepper-tab[data-tab-index="'+t+'"]');a&&(i.find(".stepper-tab").removeClass("active"),a.addClass("active"));var s=i.find('.stepper-header__step[data-step-index="'+t+'"]');s&&(i.find(".stepper-header__step").removeClass("active"),s.addClass("active"))}}l(".stepper-tab").each(function(e){0===e&&l(this).addClass("active")}),l(".stepper-header__step").on("click",function(e){l(this).hasClass("stepper-header__step--static")||(e.preventDefault(),n(l(this).closest(".stepper").attr("id"),l(this).data("step-index")))}),l(".stepper__next-btn").on("click",function(e){e.preventDefault();var t=l(this).data("stepper-id"),i=l("#".concat(t));if(i){var a=-1,s=i.find(".stepper-header__step");if(s.each(function(e){l(this).hasClass("active")&&(a=e+1)}),-1!==a&&a+1<=s.length&&n(t,a+1),3===a){var o={};l.each(l("form.checkout-form").serializeArray(),function(e,t){o[t.name]=t.value}),console.log(o)}l('input[name="pickup_address"]:checked').val()}}),l(".stepper__back-btn").on("click",function(e){e.preventDefault();var t=l(this).data("stepper-id"),i=l("#".concat(t));if(i){var a=-1,s=i.find(".stepper-header__step"),o=[];s.each(function(e){l(this).hasClass("stepper-header__step--static")&&o.push(e+1),l(this).hasClass("active")&&(a=e+1)}),2<=a&&-1==o.indexOf(a-1)&&n(t,a-1)}}),l(document).on("click",".shortened__toggle",function(e){e.preventDefault(),l(this).parent().find(".to-shorten.shortened").hasClass("active")?(l(this).parent().find(".to-shorten.shortened").removeClass("active"),l(this).html(l(this).data("text")||"Читать полностью")):(l(this).parent().find(".to-shorten.shortened").addClass("active"),l(this).data("text",l(this).text()),l(this).html("Скрыть"))}),l(".static-seo__toggle").on("click",function(e){e.preventDefault();var t=l(this).closest(".static-seo");t.hasClass("active")?(t.removeClass("active"),l(this).html(l(this).data("text")||"Читать полностью")):(t.addClass("active"),l(this).data("text",l(this).text()),l(this).html("Скрыть"))}),l(".product-media-gallery").each(function(){var e=l(this).find(".product-media-gallery__thumbs"),t=l(this).find(".product-media-gallery__top"),i=new Swiper(e[0],{spaceBetween:10,slidesPerView:4,watchSlidesVisibility:!0,watchSlidesProgress:!0,on:{init:function(){4<l(this)[0].slides.length&&l(".product-media-gallery__thumbs-arrow-forward-wrap").addClass("active")},slideChange:function(){var e=l(this)[0];e.isEnd?l(".product-media-gallery__thumbs-arrow-forward-wrap").removeClass("active"):l(".product-media-gallery__thumbs-arrow-forward-wrap").addClass("active"),e.isBeginning?l(".product-media-gallery__thumbs-arrow-backward-wrap").removeClass("active"):l(".product-media-gallery__thumbs-arrow-backward-wrap").addClass("active")}}});new Swiper(t[0],{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"},thumbs:{swiper:i,autoScrollOffset:1}})}),l(".categories-panel").each(function(){new Glider(l(this)[0],{draggable:!0,slidesToShow:"auto",exactWidth:!1,itemWidth:50})}),l(".applied-filters-panel__mobile-filter-btn").on("click",function(e){e.preventDefault();var t=l(".sidebar").parent().parent();l(".sidebar").addClass("open"),t.removeClass("d-none h-100"),l(".sidebar").prepend('<a class="applied-filters-panel__mobile-close-filter-btn back-btn text-small text-action mbp-40" href="#"><i class="icon-icon_arrows_1"></i> Вернуться назад</a>')}),l(document).on("click",".applied-filters-panel__mobile-close-filter-btn",function(e){e.preventDefault(),l(".sidebar").parent().parent().addClass("d-none h-100"),l(".sidebar").removeClass("open"),l(".sidebar").find(".applied-filters-panel__mobile-close-filter-btn").remove()}),l(".product-page__reviews-summary-score-bar").each(function(){var e=l(this).data("percent-value"),t=Number(e);t&&!isNaN(t)&&0<=t&&t<=100&&l(this).find(".product-page__reviews-summary-score-bar-inner").css("width","".concat(t,"%"))}),l(".accordion").each(function(){l(this).parent().find(".accordion__content").hide()}),l(".accordion__toggle").on("click",function(e){e.preventDefault();var t=l(this).parent(),i=t.find(".accordion__content");if(t.hasClass("opened"))t.removeClass("opened"),i.slideUp("fast");else{var a=l(this).closest(".accordions-wrap");if(a&&a.hasClass("accordions-switching"))a.find(".accordion").each(function(){var e=l(this).parent(),t=l(this).find(".accordion__content");e.removeClass("opened"),t.slideUp("fast")});t.addClass("opened"),i.slideDown("fast")}}),l(".interactive-map__pin-btn").on("click",function(){var e=Number(l(this).data("index")),t=l(this).closest(".interactive-map");if(!isNaN(e)){if(l(this).hasClass("active"))return t.find(".interactive-map__pin-btn").removeClass("active"),t.find(".interactive-map__panel").hide(),void t.find(".interactive-map__panel--initial").css("display","flex").hide().fadeIn();t.find(".interactive-map__pin-btn").removeClass("active"),l(this).addClass("active"),t.find(".interactive-map__panel").hide(),t.find('.interactive-map__panels div[data-index="'+e+'"]').css("display","flex").hide().fadeIn()}}),l(".search-form__clear-btn").on("click",function(){l(this).closest(".search-form").find(".search-form__input").val(""),l(this).addClass("d-none")}),l(".search-form__input").on("input change keypress paste",function(){var e=l(this).closest(".search-form");""===l(this).val()?e.find(".search-form__clear-btn").addClass("d-none"):e.find(".search-form__clear-btn").removeClass("d-none")}),l(".search-form__input").each(function(){var e=l(this).closest(".search-form");""===l(this).val()?e.find(".search-form__clear-btn").addClass("d-none"):e.find(".search-form__clear-btn").removeClass("d-none")}),l(".cabinet-review__text-content").each(function(){100<l(this).height()&&!l(this).hasClass("shortened")&&(l(this).addClass("shortened"),l("<a href='#' class='shortened__toggle d-block'>Показать полный текст комментария</a>").insertAfter(l(this)))}),l(".open-video-popup").on("click",function(e){e.preventDefault();var t=l(this).attr("href");l("body").addClass("overflow-hidden"),l("#videoPopupOverlay").addClass("active"),l("#videoPopupOverlay").find("iframe").attr("src",t),l("body").width()<="990"&&l("#videoPopupOverlay").find(".mobile-slider").slick("unslick").slick({infinite:!1,dots:!1,arrows:!1,slidesToShow:1.1})}),l(".open-map-popup").on("click",function(e){e.preventDefault();var t=l(this).attr("href");l("body").addClass("overflow-hidden"),l("#mapPopupOverlay").addClass("active"),l("#mapPopupOverlay").find("iframe").attr("src",t)}),l(".overlay-cdk").on("click",function(e){e.target===e.currentTarget&&(l(this).removeClass("active"),l("body").removeClass("overflow-hidden"))}),l(".overlay-cdk__close-btn").on("click",function(e){l(".overlay-cdk").removeClass("active"),l("body").removeClass("overflow-hidden")}),l(".drawer-toggler").on("click",function(){a()});var i=l(".mobile-drawer");i&&new Hammer(i[0]).on("swiperight",function(){a()});function a(){l(".mobile-drawer").hasClass("active")?(l(".mobile-drawer").removeClass("active dark"),l("body").removeClass("overflow-hidden")):(l(".mobile-drawer").addClass("active"),l("body").addClass("overflow-hidden"),setTimeout(function(){l(".mobile-drawer").addClass("dark")},250))}function s(){var e=l(window).outerWidth(),t=l(".product-page-sidebar"),i=l(".cart-page-sidebar"),a=(l(".product-page__reviews-comments"),l(".breadcrumb")),s=l(".to-shorten");if(e<=990){if(t&&t.detach().appendTo(".product-page__mobile-sidebar-spot"),i){var o=i.find(".cart-page-sidebar__top"),n=i.find(".cart-page-sidebar__bottom");o.detach().appendTo(".cart-page__mobile-top-sidebar-spot"),n.detach().appendTo(".cart-page__mobile-bottom-sidebar-spot")}if(s&&s.each(function(){100<l(this).height()&&!l(this).hasClass("shortened")&&(l(this).addClass("shortened"),l("<a href='#' class='shortened__toggle d-block mbp-20'>Читать полностью</a>").insertAfter(l(this)))}),a&&!a.hasClass("mobile-breadcrumb")){a.addClass("mobile-breadcrumb");var r=a.children().length;a.children().each(function(e){0!==e&&e!==r-1&&l(this).remove()}),2<r&&l('<li class="breadcrumb-item text-black-secondary">...</li>').insertAfter(a.children(":first"))}l(".mobile-slider").each(function(){l(this).hasClass("slick-initialized")||(l(this).hasClass("mobile-slider--full")?l(this).slick({infinite:!1,dots:!1,arrows:!1,slidesToShow:1,variableWidth:!1,swipeToSlide:!0}):l(this).slick({infinite:!1,dots:!1,arrows:!1,slidesToShow:1,variableWidth:!0,swipeToSlide:!0}))}),l(".mobile-carousel").each(function(){l(this).hasClass("slick-initialized")||l(this).slick({infinite:!1,dots:!0,arrows:!1,slidesToShow:1})}),l(".contact-tabs").each(function(){if(!l(this).hasClass("swiper-wrapper")){l(this).wrap('<div class="contact-tabs-swiper"></div>'),l(this).addClass("swiper-wrapper"),l(this).find(".nav-item").each(function(){l(this).addClass("swiper-slide")});new Swiper(".contact-tabs-swiper",{freeMode:!0,slidesPerView:"auto",loop:!1})}})}else{if(t&&(t.parent().hasClass("sidebar-initial-spot")||t.detach().appendTo(".sidebar-initial-spot")),i){var c=l(".cart-page-sidebar__top"),d=l(".cart-page-sidebar__bottom");c.parent().hasClass("cart-page__mobile-top-sidebar-spot")&&c.detach().appendTo(".cart-page-sidebar__top-wrap"),d.parent().hasClass("cart-page__mobile-bottom-sidebar-spot")&&d.detach().appendTo(".cart-page-sidebar__bottom-wrap")}l(".mobile-slider").each(function(){l(this).hasClass("slick-initialized")&&l(this).slick("unslick")}),l(".mobile-carousel").each(function(){l(this).hasClass("slick-initialized")&&l(this).slick("unslick")}),l(".contact-tabs").each(function(){l(this).hasClass("swiper-wrapper")&&(l(this).unwrap(),l(this).removeClass("swiper-wrapper"),l(this).find(".nav-item").each(function(){l(this).removeClass("swiper-slide")}),l(this).swiper&&l(this).swiper.destroy())})}}l(".mobile-drawer").on("click",function(e){e.target===e.currentTarget&&a()}),l(".mobile-drawer__close-btn").on("click",function(){a()}),s(),l(window).on("resize",function(){s()}),l("body").width()<="990"&&300<=l(document).scrollTop()?l(".main-header__top").addClass("fixed"):l(".main-header__top").removeClass("fixed"),l(document).on("scroll",function(){l("body").width()<="990"&&300<=l(document).scrollTop()?l(".main-header__top").addClass("fixed"):l(".main-header__top").removeClass("fixed")}),l(".dropdown-city-menu__region-selector .dropdown-city-menu__selector-item").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=l(this).data("region-index"),i=l(this).closest(".dropdown-menu");i.find(".dropdown-city-menu__region-selector").removeClass("active"),i.find(".dropdown-city-menu__city-selector").removeClass("active"),i.find('.dropdown-city-menu__city-selector[data-region-index="'+t+'"]').addClass("active")}),l(".dropdown-city-menu__regions-btn").on("click",function(e){e.preventDefault();var t=l(this).closest(".dropdown-menu");t.find(".dropdown-city-menu__region-selector").addClass("active"),t.find(".dropdown-city-menu__city-selector").removeClass("active")}),l(".dropdown-city-menu__current-region").on("click",function(e){e.preventDefault()}),l(".selected-city-menu").on("click",function(e){e.preventDefault(),e.stopPropagation()}),l(".dropdown-city-menu__city-selector .dropdown-city-menu__selector-item").on("click",function(e){e.preventDefault()})})}(jQuery);
//# sourceMappingURL=main.min.js.map
