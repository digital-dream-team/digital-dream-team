{"version":3,"sources":["main.js"],"names":["$","document","ready","length","delivery_type","val","on","this","addClass","removeClass","resize","width","window","outerWidth","productPageSidebar","productComments","breadcrumb","detach","toShorten","each","height","hasClass","insertAfter","children","index","bcInitialLength","remove","infinite","dots","slick","arrows","slidesToShow","parent","appendTo","find","data","html","text","watchSlidesVisibility","watchSlidesProgress","galleryThumbs","Swiper","thumb","init","slidesPerView","console","slider","slides","slideChange","isBeginning","isEnd","galleryTop","prevEl","pagination","top","spaceBetween","navigation","nextEl","el","thumbs","swiper","autoScrollOffset","scrollTop","$self","panStart","categoryPan","$event","center","x","ondragstart","scrollLeft","closest","Hammer","preventDefault","attr","walk","e","link","log","value","percent","bar","Number","isNaN","css","concat","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["(function ($) {\r\n  $(document).ready(function () {\r\n    // Cart page\r\n\r\n    if ($('input[name=\"delivery_type\"]').length) {\r\n      let delivery_type = $('input[name=\"delivery_type\"]:checked').val();\r\n      $('input[name=\"delivery_type\"]').on(\"change\", function () {\r\n        delivery_type = $(this).val();\r\n\r\n        if (delivery_type === \"type_pickup\") {\r\n          $(\".address-form__delivery-type-hint--1\").addClass(\"d-none\");\r\n        } else if (delivery_type === \"type_home\") {\r\n          $(\".address-form__delivery-type-hint--1\").removeClass(\"d-none\");\r\n        }\r\n      });\r\n    }\r\n\r\n    resize();\r\n    $(window).on(\"resize\", function () {\r\n      resize();\r\n    });\r\n    function resize() {\r\n      const win = $(window); //this = window\r\n      const width = win.outerWidth();\r\n\r\n      const productPageSidebar = $(\".product-page-sidebar\");\r\n      const productComments = $(\".product-page__reviews-comments\");\r\n      const breadcrumb = $(\".breadcrumb\");\r\n      const toShorten = $(\".to-shorten\");\r\n      if (width <= 990) {\r\n        // Move product sidebar on   mobile\r\n        if (productPageSidebar) {\r\n          productPageSidebar\r\n            .detach()\r\n            .appendTo(\".product-page__mobile-sidebar-spot\");\r\n        }\r\n        // To shorten big chunks of text\r\n        if (toShorten) {\r\n          toShorten.each(function () {\r\n            if ($(this).height() > 100 && !$(this).hasClass(\"shortened\")) {\r\n              $(this).addClass(\"shortened\");\r\n              $(\r\n                \"<a href='#' class='shortened__toggle d-block mbp-20'>Читать полностью</a>\",\r\n              ).insertAfter($(this));\r\n            }\r\n          });\r\n        }\r\n\r\n        // Shorten mobile breadcrumb\r\n        if (breadcrumb && !breadcrumb.hasClass(\"mobile-breadcrumb\")) {\r\n          breadcrumb.addClass(\"mobile-breadcrumb\");\r\n\r\n          let bcInitialLength = breadcrumb.children().length;\r\n          breadcrumb.children().each(function (index) {\r\n            if (index !== 0 && index !== bcInitialLength - 1) {\r\n              $(this).remove();\r\n            }\r\n          });\r\n          if (bcInitialLength > 2) {\r\n            $(\r\n              '<li class=\"breadcrumb-item text-black-secondary\">...</li>',\r\n            ).insertAfter(breadcrumb.children(\":first\"));\r\n          }\r\n        }\r\n\r\n        // Slick mobile-slider\r\n        $(\".mobile-slider\").each(function () {\r\n          if (!$(this).hasClass(\"slick-initialized\")) {\r\n            $(this).slick({\r\n              infinite: false,\r\n              dots: false,\r\n              arrows: false,\r\n              slidesToShow: 1,\r\n              // centerMode: true,\r\n              // centerPadding: \"20px\",\r\n            });\r\n          }\r\n        });\r\n\r\n        // Comments gallery slick\r\n        // $(\".product-page__reviews-comment-uploads\").each(function () {\r\n        //   if (!$(this).hasClass(\"slick-initialized\")) {\r\n        //     $(this).slick({\r\n        //       infinite: false,\r\n        //       dots: false,\r\n        //       arrows: false,\r\n        //       slidesToShow: 1,\r\n        //       variableWidth: true,\r\n        //       waitForAnimate: false,\r\n        //       // slidesToScroll: 3,\r\n        //       // centerMode: true,\r\n        //       // centerPadding: \"20px\",\r\n        //     });\r\n        //   }\r\n        // });\r\n      } else {\r\n        // Put product sidebar back on desktop\r\n        if (productPageSidebar) {\r\n          if (!productPageSidebar.parent().hasClass(\"sidebar-initial-spot\")) {\r\n            productPageSidebar.detach().appendTo(\".sidebar-initial-spot\");\r\n          }\r\n        }\r\n        // Destroy mobile-slider\r\n        $(\".mobile-slider\").each(function () {\r\n          if ($(this).hasClass(\"slick-initialized\")) {\r\n            $(this).slick(\"unslick\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    $(document).on(\"click\", \".shortened__toggle\", function (e) {\r\n      e.preventDefault();\r\n      if (!$(this).parent().find(\".to-shorten.shortened\").hasClass(\"active\")) {\r\n        $(this).parent().find(\".to-shorten.shortened\").addClass(\"active\");\r\n        $(this).data(\"text\", $(this).text());\r\n        $(this).html(\"Скрыть\");\r\n      } else {\r\n        $(this).parent().find(\".to-shorten.shortened\").removeClass(\"active\");\r\n        $(this).html($(this).data(\"text\") || \"Читать полностью\");\r\n      }\r\n      // $(this).remove();\r\n    });\r\n\r\n    // // Swipe mobile-slider class on mobile\r\n    // $(\".mobile-slider\").each(function () {\r\n    //   if ($(\"body\").width() <= \"990\") {\r\n    //     let $self = $(this);\r\n    //     let panStart = null;\r\n    //     let target = new Hammer($self[0]);\r\n    //     let position = 0;\r\n    //     let width = $self[0].scrollWidth - $self.width();\r\n\r\n    //     target.on(\"panstart\", function ($event) {\r\n    //       panStart = $event.center.x;\r\n    //       if (\r\n    //         $self.data(\"position\") &&\r\n    //         !isNaN(Number($self.data(\"position\")))\r\n    //       ) {\r\n    //         position = Number($self.data(\"position\"));\r\n    //       }\r\n    //     });\r\n    //     target.on(\"panend\", function ($event) {\r\n    //       panStart = null;\r\n    //       if (Number($self.data(\"position\")) > 0) {\r\n    //         $self.children().css(\"transform\", `translateX(${0}px)`);\r\n    //         $self.data(\"position\", 0);\r\n    //       }\r\n    //       if (Number($self.data(\"position\")) < -width) {\r\n    //         $self.children().css(\"transform\", `translateX(${-width}px)`);\r\n    //         $self.data(\"position\", -width);\r\n    //       }\r\n    //     });\r\n\r\n    //     target.on(\"pan\", function ($event) {\r\n    //       const walk = ($event.center.x - panStart) * 1; //scroll-fast\r\n    //       // console.log(walk);\r\n    //       // $self.scrollLeft($self.scrollLeft() - walk);\r\n    //       let newPosition = position + walk;\r\n    //       $self.children().css(\"transform\", `translateX(${newPosition}px)`);\r\n    //       // position = newPosition;\r\n    //       $self.data(\"position\", newPosition);\r\n    //     });\r\n    //   }\r\n    // });\r\n\r\n    // Swiper initialize\r\n    $(\".product-media-gallery\").each(function () {\r\n      const thumb = $(this).find(\".product-media-gallery__thumbs\");\r\n      const top = $(this).find(\".product-media-gallery__top\");\r\n\r\n      let galleryThumbs = new Swiper(thumb[0], {\r\n        spaceBetween: 10,\r\n        slidesPerView: 4,\r\n        // freeMode: true,\r\n        watchSlidesVisibility: true,\r\n        watchSlidesProgress: true,\r\n        // slidesPerGroup: 3,\r\n        on: {\r\n          init: function () {\r\n            if ($(this)[0].slides.length > 4) {\r\n              $(\".product-media-gallery__thumbs-arrow-forward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n          },\r\n          slideChange: function () {\r\n            console.log($(this));\r\n            let slider = $(this)[0];\r\n            if (slider.isEnd) {\r\n              $(\r\n                \".product-media-gallery__thumbs-arrow-forward-wrap\",\r\n              ).removeClass(\"active\");\r\n            } else {\r\n              $(\".product-media-gallery__thumbs-arrow-forward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n            if (slider.isBeginning) {\r\n              $(\r\n                \".product-media-gallery__thumbs-arrow-backward-wrap\",\r\n              ).removeClass(\"active\");\r\n            } else {\r\n              $(\".product-media-gallery__thumbs-arrow-backward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n          },\r\n        },\r\n      });\r\n\r\n      let galleryTop = new Swiper(top[0], {\r\n        spaceBetween: 10,\r\n        navigation: {\r\n          nextEl: \".swiper-button-next\",\r\n          prevEl: \".swiper-button-prev\",\r\n        },\r\n        pagination: {\r\n          el: \".swiper-pagination\",\r\n        },\r\n        thumbs: {\r\n          swiper: galleryThumbs,\r\n          autoScrollOffset: 1,\r\n        },\r\n      });\r\n    });\r\n\r\n    // $(\"[data-badge]\").each(function () {\r\n    //   const badgeValue = $(this).data(\"badge\");\r\n    //   $(this).addClass(\"has-badge\");\r\n    //   $(this).append(`<span class=\"has-badge__item\">${badgeValue}</span>`);\r\n    // });\r\n    if ($(\"body\").width() <= \"576\") {\r\n      if ($(document).scrollTop() >= 300) {\r\n        $(\".main-header__top\").addClass(\"fixed\");\r\n      } else {\r\n        $(\".main-header__top\").removeClass(\"fixed\");\r\n      }\r\n    } else {\r\n      $(\".main-header__top\").removeClass(\"fixed\");\r\n    }\r\n    $(document).on(\"scroll\", function () {\r\n      if ($(\"body\").width() <= \"576\") {\r\n        if ($(document).scrollTop() >= 300) {\r\n          $(\".main-header__top\").addClass(\"fixed\");\r\n        } else {\r\n          $(\".main-header__top\").removeClass(\"fixed\");\r\n        }\r\n      } else {\r\n        $(\".main-header__top\").removeClass(\"fixed\");\r\n      }\r\n    });\r\n\r\n    $(\".categories-panel a\").each(function () {\r\n      $(this)[0].ondragstart = function () {\r\n        return false;\r\n      };\r\n    });\r\n\r\n    // Swipe categories\r\n    $(\".categories-panel\").each(function () {\r\n      let $self = $(this);\r\n      let panStart = null;\r\n      let categoryPan = new Hammer($self[0]);\r\n\r\n      categoryPan.on(\"panstart\", function ($event) {\r\n        panStart = $event.center.x;\r\n      });\r\n      categoryPan.on(\"panend\", function ($event) {\r\n        panStart = null;\r\n      });\r\n\r\n      categoryPan.on(\"pan\", function ($event) {\r\n        const walk = ($event.center.x - panStart) * 0.08; //scroll-fast\r\n        $self.scrollLeft($self.scrollLeft() - walk);\r\n      });\r\n    });\r\n\r\n    $(\".static-seo__toggle\").on(\"click\", function (e) {\r\n      e.preventDefault();\r\n      const parent = $(this).closest(\".static-seo\");\r\n      if (!parent.hasClass(\"active\")) {\r\n        parent.addClass(\"active\");\r\n        $(this).data(\"text\", $(this).text());\r\n        $(this).html(\"Скрыть\");\r\n      } else {\r\n        parent.removeClass(\"active\");\r\n        $(this).html($(this).data(\"text\") || \"Читать полностью\");\r\n      }\r\n    });\r\n\r\n    // Open video overlay\r\n    $(\".open-video-popup\").on(\"click\", function (e) {\r\n      e.preventDefault();\r\n      const link = $(this).attr(\"href\");\r\n      console.log(link);\r\n\r\n      $(\"body\").addClass(\"overflow-hidden\");\r\n      $(\"#videoPopupOverlay\").addClass(\"active\");\r\n\r\n      if ($(\"body\").width() <= \"990\") {\r\n        $(\"#videoPopupOverlay\").find(\"iframe\").attr(\"src\", link);\r\n        // rebuild carousel because overlay doesn't calculate properly\r\n        $(\"#videoPopupOverlay\").find(\".mobile-slider\").slick(\"unslick\").slick({\r\n          infinite: false,\r\n          dots: false,\r\n          arrows: false,\r\n          slidesToShow: 1.1,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Close overlay on outside click\r\n    $(\".overlay-cdk\").on(\"click\", function () {\r\n      $(this).removeClass(\"active\");\r\n      $(\"body\").removeClass(\"overflow-hidden\");\r\n    });\r\n    // Prevent overlay closing on content click\r\n    $(\".overlay-cdk__content\").on(\"click\", function () {\r\n      return false;\r\n    });\r\n\r\n    // product reviews bar value\r\n    $(\".product-page__reviews-summary-score-bar\").each(function () {\r\n      const value = $(this).data(\"percent-value\");\r\n      const percent = Number(value);\r\n      if (percent && !isNaN(percent) && percent >= 0 && percent <= 100) {\r\n        const bar = $(this).find(\r\n          \".product-page__reviews-summary-score-bar-inner\",\r\n        );\r\n        bar.css(\"width\", `${percent}%`);\r\n      }\r\n    });\r\n  });\r\n})(jQuery);\r\n"]}