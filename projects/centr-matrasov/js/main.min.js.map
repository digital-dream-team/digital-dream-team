{"version":3,"sources":["main.js"],"names":["$","document","ready","resize","width","window","outerWidth","win","productPageSidebar","productComments","toShorten","appendTo","each","this","height","hasClass","addClass","insertAfter","breadcrumb","bcInitialLength","children","length","index","remove","slick","infinite","dots","arrows","slidesToShow","variableWidth","waitForAnimate","parent","detach","e","preventDefault","find","removeClass","html","data","text","spaceBetween","slidesPerView","top","watchSlidesProgress","Swiper","thumb","on","watchSlidesVisibility","slides","slideChange","console","slider","log","isBeginning","navigation","pagination","nextEl","prevEl","thumbs","swiper","galleryThumbs","autoScrollOffset","scrollTop","panStart","center","categoryPan","ondragstart","walk","Hammer","$self","$event","x","scrollLeft","closest","link","attr","value","percent","Number","isNaN","css","concat","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["(function ($) {\r\n  $(document).ready(function () {\r\n    resize();\r\n    $(window).on(\"resize\", function () {\r\n      resize();\r\n    });\r\n    function resize() {\r\n      const win = $(window); //this = window\r\n      const width = win.outerWidth();\r\n\r\n      const productPageSidebar = $(\".product-page-sidebar\");\r\n      const productComments = $(\".product-page__reviews-comments\");\r\n      const breadcrumb = $(\".breadcrumb\");\r\n      const toShorten = $(\".to-shorten\");\r\n      if (width <= 990) {\r\n        // Move product sidebar on   mobile\r\n        if (productPageSidebar) {\r\n          productPageSidebar\r\n            .detach()\r\n            .appendTo(\".product-page__mobile-sidebar-spot\");\r\n        }\r\n        // To shorten big chunks of text\r\n        if (toShorten) {\r\n          toShorten.each(function () {\r\n            if ($(this).height() > 100 && !$(this).hasClass(\"shortened\")) {\r\n              $(this).addClass(\"shortened\");\r\n              $(\r\n                \"<a href='#' class='shortened__toggle d-block mbp-20'>Читать полностью</a>\",\r\n              ).insertAfter($(this));\r\n            }\r\n          });\r\n        }\r\n\r\n        // Shorten mobile breadcrumb\r\n        if (breadcrumb && !breadcrumb.hasClass(\"mobile-breadcrumb\")) {\r\n          breadcrumb.addClass(\"mobile-breadcrumb\");\r\n\r\n          let bcInitialLength = breadcrumb.children().length;\r\n          breadcrumb.children().each(function (index) {\r\n            if (index !== 0 && index !== bcInitialLength - 1) {\r\n              $(this).remove();\r\n            }\r\n          });\r\n          if (bcInitialLength > 2) {\r\n            $(\r\n              '<li class=\"breadcrumb-item text-black-secondary\">...</li>',\r\n            ).insertAfter(breadcrumb.children(\":first\"));\r\n          }\r\n        }\r\n\r\n        // Slick mobile-slider\r\n        $(\".mobile-slider\").each(function () {\r\n          if (!$(this).hasClass(\"slick-initialized\")) {\r\n            $(this).slick({\r\n              infinite: false,\r\n              dots: false,\r\n              arrows: false,\r\n              slidesToShow: 1,\r\n              // centerMode: true,\r\n              // centerPadding: \"20px\",\r\n            });\r\n          }\r\n        });\r\n\r\n        // Comments gallery slick\r\n        $(\".product-page__reviews-comment-uploads\").each(function () {\r\n          if (!$(this).hasClass(\"slick-initialized\")) {\r\n            $(this).slick({\r\n              infinite: false,\r\n              dots: false,\r\n              arrows: false,\r\n              slidesToShow: 1,\r\n              variableWidth: true,\r\n              waitForAnimate: false,\r\n              // slidesToScroll: 3,\r\n              // centerMode: true,\r\n              // centerPadding: \"20px\",\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        // Put product sidebar back on desktop\r\n        if (productPageSidebar) {\r\n          if (!productPageSidebar.parent().hasClass(\"sidebar-initial-spot\")) {\r\n            productPageSidebar.detach().appendTo(\".sidebar-initial-spot\");\r\n          }\r\n        }\r\n        // Destroy mobile-slider\r\n        $(\".mobile-slider\").each(function () {\r\n          if ($(this).hasClass(\"slick-initialized\")) {\r\n            $(this).slick(\"unslick\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    $(document).on(\"click\", \".shortened__toggle\", function (e) {\r\n      e.preventDefault();\r\n      if (!$(this).parent().find(\".to-shorten.shortened\").hasClass(\"active\")) {\r\n        $(this).parent().find(\".to-shorten.shortened\").addClass(\"active\");\r\n        $(this).data(\"text\", $(this).text());\r\n        $(this).html(\"Скрыть\");\r\n      } else {\r\n        $(this).parent().find(\".to-shorten.shortened\").removeClass(\"active\");\r\n        $(this).html($(this).data(\"text\") || \"Читать полностью\");\r\n      }\r\n      // $(this).remove();\r\n    });\r\n\r\n    // // Swipe mobile-slider class on mobile\r\n    // $(\".mobile-slider\").each(function () {\r\n    //   if ($(\"body\").width() <= \"990\") {\r\n    //     let $self = $(this);\r\n    //     let panStart = null;\r\n    //     let target = new Hammer($self[0]);\r\n    //     let position = 0;\r\n    //     let width = $self[0].scrollWidth - $self.width();\r\n\r\n    //     target.on(\"panstart\", function ($event) {\r\n    //       panStart = $event.center.x;\r\n    //       if (\r\n    //         $self.data(\"position\") &&\r\n    //         !isNaN(Number($self.data(\"position\")))\r\n    //       ) {\r\n    //         position = Number($self.data(\"position\"));\r\n    //       }\r\n    //     });\r\n    //     target.on(\"panend\", function ($event) {\r\n    //       panStart = null;\r\n    //       if (Number($self.data(\"position\")) > 0) {\r\n    //         $self.children().css(\"transform\", `translateX(${0}px)`);\r\n    //         $self.data(\"position\", 0);\r\n    //       }\r\n    //       if (Number($self.data(\"position\")) < -width) {\r\n    //         $self.children().css(\"transform\", `translateX(${-width}px)`);\r\n    //         $self.data(\"position\", -width);\r\n    //       }\r\n    //     });\r\n\r\n    //     target.on(\"pan\", function ($event) {\r\n    //       const walk = ($event.center.x - panStart) * 1; //scroll-fast\r\n    //       // console.log(walk);\r\n    //       // $self.scrollLeft($self.scrollLeft() - walk);\r\n    //       let newPosition = position + walk;\r\n    //       $self.children().css(\"transform\", `translateX(${newPosition}px)`);\r\n    //       // position = newPosition;\r\n    //       $self.data(\"position\", newPosition);\r\n    //     });\r\n    //   }\r\n    // });\r\n\r\n    // Swiper initialize\r\n    $(\".product-media-gallery\").each(function () {\r\n      const thumb = $(this).find(\".product-media-gallery__thumbs\");\r\n      const top = $(this).find(\".product-media-gallery__top\");\r\n\r\n      let galleryThumbs = new Swiper(thumb[0], {\r\n        spaceBetween: 10,\r\n        slidesPerView: 4,\r\n        // freeMode: true,\r\n        watchSlidesVisibility: true,\r\n        watchSlidesProgress: true,\r\n        // slidesPerGroup: 3,\r\n        on: {\r\n          init: function () {\r\n            if ($(this)[0].slides.length > 4) {\r\n              $(\".product-media-gallery__thumbs-arrow-forward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n          },\r\n          slideChange: function () {\r\n            console.log($(this));\r\n            let slider = $(this)[0];\r\n            if (slider.isEnd) {\r\n              $(\r\n                \".product-media-gallery__thumbs-arrow-forward-wrap\",\r\n              ).removeClass(\"active\");\r\n            } else {\r\n              $(\".product-media-gallery__thumbs-arrow-forward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n            if (slider.isBeginning) {\r\n              $(\r\n                \".product-media-gallery__thumbs-arrow-backward-wrap\",\r\n              ).removeClass(\"active\");\r\n            } else {\r\n              $(\".product-media-gallery__thumbs-arrow-backward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n          },\r\n        },\r\n      });\r\n\r\n      let galleryTop = new Swiper(top[0], {\r\n        spaceBetween: 10,\r\n        navigation: {\r\n          nextEl: \".swiper-button-next\",\r\n          prevEl: \".swiper-button-prev\",\r\n        },\r\n        pagination: {\r\n          el: \".swiper-pagination\",\r\n        },\r\n        thumbs: {\r\n          swiper: galleryThumbs,\r\n          autoScrollOffset: 1,\r\n        },\r\n      });\r\n    });\r\n\r\n    // $(\"[data-badge]\").each(function () {\r\n    //   const badgeValue = $(this).data(\"badge\");\r\n    //   $(this).addClass(\"has-badge\");\r\n    //   $(this).append(`<span class=\"has-badge__item\">${badgeValue}</span>`);\r\n    // });\r\n    if ($(\"body\").width() <= \"576\") {\r\n      if ($(document).scrollTop() >= 300) {\r\n        $(\".main-header__top\").addClass(\"fixed\");\r\n      } else {\r\n        $(\".main-header__top\").removeClass(\"fixed\");\r\n      }\r\n    } else {\r\n      $(\".main-header__top\").removeClass(\"fixed\");\r\n    }\r\n    $(document).on(\"scroll\", function () {\r\n      if ($(\"body\").width() <= \"576\") {\r\n        if ($(document).scrollTop() >= 300) {\r\n          $(\".main-header__top\").addClass(\"fixed\");\r\n        } else {\r\n          $(\".main-header__top\").removeClass(\"fixed\");\r\n        }\r\n      } else {\r\n        $(\".main-header__top\").removeClass(\"fixed\");\r\n      }\r\n    });\r\n\r\n    $(\".categories-panel a\").each(function () {\r\n      $(this)[0].ondragstart = function () {\r\n        return false;\r\n      };\r\n    });\r\n\r\n    // Swipe categories\r\n    $(\".categories-panel\").each(function () {\r\n      let $self = $(this);\r\n      let panStart = null;\r\n      let categoryPan = new Hammer($self[0]);\r\n\r\n      categoryPan.on(\"panstart\", function ($event) {\r\n        panStart = $event.center.x;\r\n      });\r\n      categoryPan.on(\"panend\", function ($event) {\r\n        panStart = null;\r\n      });\r\n\r\n      categoryPan.on(\"pan\", function ($event) {\r\n        const walk = ($event.center.x - panStart) * 0.08; //scroll-fast\r\n        $self.scrollLeft($self.scrollLeft() - walk);\r\n      });\r\n    });\r\n\r\n    $(\".static-seo__toggle\").on(\"click\", function (e) {\r\n      e.preventDefault();\r\n      const parent = $(this).closest(\".static-seo\");\r\n      if (!parent.hasClass(\"active\")) {\r\n        parent.addClass(\"active\");\r\n        $(this).data(\"text\", $(this).text());\r\n        $(this).html(\"Скрыть\");\r\n      } else {\r\n        parent.removeClass(\"active\");\r\n        $(this).html($(this).data(\"text\") || \"Читать полностью\");\r\n      }\r\n    });\r\n\r\n    // Open video overlay\r\n    $(\".open-video-popup\").on(\"click\", function (e) {\r\n      e.preventDefault();\r\n      const link = $(this).attr(\"href\");\r\n      console.log(link);\r\n\r\n      $(\"body\").addClass(\"overflow-hidden\");\r\n      $(\"#videoPopupOverlay\").addClass(\"active\");\r\n\r\n      if ($(\"body\").width() <= \"990\") {\r\n        $(\"#videoPopupOverlay\").find(\"iframe\").attr(\"src\", link);\r\n        // rebuild carousel because overlay doesn't calculate properly\r\n        $(\"#videoPopupOverlay\").find(\".mobile-slider\").slick(\"unslick\").slick({\r\n          infinite: false,\r\n          dots: false,\r\n          arrows: false,\r\n          slidesToShow: 1.1,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Close overlay on outside click\r\n    $(\".overlay-cdk\").on(\"click\", function () {\r\n      $(this).removeClass(\"active\");\r\n      $(\"body\").removeClass(\"overflow-hidden\");\r\n    });\r\n    // Prevent overlay closing on content click\r\n    $(\".overlay-cdk__content\").on(\"click\", function () {\r\n      return false;\r\n    });\r\n\r\n    // product reviews bar value\r\n    $(\".product-page__reviews-summary-score-bar\").each(function () {\r\n      const value = $(this).data(\"percent-value\");\r\n      const percent = Number(value);\r\n      if (percent && !isNaN(percent) && percent >= 0 && percent <= 100) {\r\n        const bar = $(this).find(\r\n          \".product-page__reviews-summary-score-bar-inner\",\r\n        );\r\n        bar.css(\"width\", `${percent}%`);\r\n      }\r\n    });\r\n  });\r\n})(jQuery);\r\n"]}