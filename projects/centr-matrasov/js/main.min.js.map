{"version":3,"sources":["main.js"],"names":["$","document","ready","resize","width","window","outerWidth","win","productPageSidebar","productComments","toShorten","appendTo","each","this","height","hasClass","addClass","insertAfter","breadcrumb","bcInitialLength","children","length","index","remove","slick","infinite","dots","arrows","slidesToShow","detach","on","e","preventDefault","parent","find","spaceBetween","slidesPerView","top","watchSlidesProgress","Swiper","thumb","watchSlidesVisibility","slides","slideChange","console","slider","log","isBeginning","removeClass","navigation","pagination","nextEl","prevEl","thumbs","swiper","galleryThumbs","autoScrollOffset","scrollTop","$self","panStart","categoryPan","$event","ondragstart","walk","Hammer","closest","center","x","scrollLeft","value","percent","bar","data","Number","isNaN","css","concat","jQuery"],"mappings":"cAAA,SAAWA,GACTA,EAAEC,UAAUC,MAAM,WAGdC,SAAMA,IADR,IAKQC,EALRJ,EAAAK,QAKoBC,aADZC,EAAiBP,EAAA,yBACjBI,GAGkBJ,EAAE,mCAHRM,EAAAA,gBAEZE,EAAAA,EAAAA,eACN,GAAMC,GAAAA,IAAAA,CAuBJ,GArBIC,GAIFF,EAHAJ,SACFO,SAAA,sCAMAD,GAEEA,EAAUE,KAAK,WACU,IAAnBZ,EAAEa,MAAMC,WAAmBd,EAAEa,MAAME,SAAS,eAFhDL,EAAAA,MAAJM,SAAe,aACbN,EACMV,6EACAiB,YAAMD,EAARH,UASFK,IAAeA,EAAWH,SAAS,qBAAsB,CAA7DG,EAAIA,SAAeA,qBAGjB,IAAIC,EAAkBD,EAAWE,WAAWC,OAC5CH,EAAWE,WAAWR,KAAK,SAAUU,GACrB,IAAVA,GAAeA,IAAUH,EAAkB,GAC7CnB,EAAEa,MAAMU,WAGU,EAAlBJ,GAAJnB,EAEI,6DAEHiB,YAAAC,EAAAE,SAAA,WAKDpB,EAAA,kBAAae,KAAS,WAClBf,EAAAa,MAAAE,SAAkBS,sBAClBC,EAAAA,kBADwBD,MAAA,CAExBE,UAAM,EACNC,MAAM,EACNC,QAAAA,EAEAA,aAAA,aAOJpB,IACEA,EAAmBqB,SAASlB,SAAS,yBACtCH,EAAAqB,SAAAlB,SAAA,0BAGHX,EAAE,kBAAkBY,KAAK,WACnBZ,EAAEa,MAAME,SAAS,sBACnBf,EAAEa,MAAMW,MAAM,aAzEzBrB,IACGF,EAAAA,QAAUC,GAAAA,SAAM,WAChBC,MA6EAH,EAAEC,UAAU6B,GAAG,QAAS,qBAAsB,SAAUC,GACtDA,EAAEC,iBACFhC,EAAEa,MAAMoB,SAASC,KAAK,yBAAyBlB,SAAS,UACxDhB,EAAEa,MAAMU,WAmDNY,EAAAA,0BADuCvB,KAAA,WAEvCwB,IAAAA,EAAAA,EAAavB,MAF0BqB,KAAA,kCAGvCG,EAAArC,EAAAa,MAAAqB,KAAA,+BAEAI,EAAAA,IAAqBC,OALkBC,EAAA,GAAA,CAMvCL,aAAA,GACAL,cAAI,EAEAW,uBAAeC,EACb1C,qBAAE,EAIL8B,GAPC,CAQFa,KAAAA,WACE,EAAAC,EAAAA,MAAY5C,GAAE0C,OAAdrB,QACArB,EAAI6C,qDAAJ7B,SANI,WAYFhB,YAAE,WAGH4C,QAAAE,IAAA9C,EAAAa,OATD,IAAIgC,EAAS7C,EAAEa,MAAM,GAUjBgC,EAAOE,MACT/C,EADF,qDAKIgD,YAAA,UAILhD,EAAA,qDAAAgB,SA7BC,UAkCJmB,EAAcY,YACdE,EACQ,sDACAD,YAAE,UAEVE,EAAAA,sDAAYlC,SACN,cASV,IAAAuB,OAAAF,EAAA,GAAA,CACAF,aAAA,GACAc,WAAA,CACAE,OAAA,sBACAC,OAAA,uBACIpD,WAAUI,CACRJ,GAAEC,sBAANoD,OAEO,CACHC,OAAAC,EACHC,iBAAA,OASAxD,EAAA,QAAAI,SAAA,QAPH,KAAAJ,EAAAC,UAAAwD,YAUEzD,EAAA,qBAAuBY,SAAK,SAE1BZ,EAAA,qBAAAgD,YAAA,UAZJhD,EAAEC,UAAU6B,GAAG,SAAU,WAiBvB9B,EAAA,QAAAI,SAAF,QACE,KAAIsD,EAAAA,UAASD,YACTE,EAAAA,qBAAJ3C,SAAA,SAGA4C,EAAAA,qBAA2BZ,YAAUa,YAKpC7D,EAAA,uBAFDY,KAAA,WAIAgD,EAAAA,MAAAA,GAAWE,YAAW,WACpB,OAAMC,KAKV/D,EAAE,qBAADY,KAAwBA,WACvBZ,IAAE0D,EAAS1D,EAAAa,MACPmB,EAAAA,KACF4B,EAAiB,IAAFI,OAAQC,EAAQ,IAEhCL,EAJD9B,GAAA,WAAA,SAAA+B,GAOFF,EAAAE,EAAAK,OAAAC,IAEEP,EAAA9B,GAAA,SAAA,SAAA+B,GAEE7B,EAAAA,OAlBF4B,EAAY9B,GAAG,MAAO,SAAU+B,GAsBhC,IAAME,EAA0B,KAAlB3D,EAAV8D,OAAJC,EAAgCR,GAC9BD,EAAAU,WAAAV,EAAAU,aAAAL,OAIEpC,EAAAA,uBAHoEf,KAAA,WAIpEgB,EAAAA,MAAAA,GAAAA,QAAc,SAAAG,GAJsDA,EAAtEC,iBAMDhC,EAAAa,MAAAoD,QAAA,eAGHjD,SAAA,cAIChB,EArBC,2FAuBA8B,GAAA,QAAA,SAAAC,GACAA,EAAAC,iBADFhC,EAIA,QAAAgB,SAAA,mBAvBEhB,EAAE,sBAAsBgB,SAAS,UAyB3BqD,EAAAA,QAAUjE,SAAW,OArBzBJ,EAAE,sBAAsBkC,KAAK,kBAAkBV,MAAM,WAAWA,MAAM,CAuBpE8C,UAAO,EACT5C,MAAS,EAGT6C,QAAQ,EACT3C,aAAA,QAlBH5B,EAAE,gBAAgB8B,GAAG,QAAS,WAC5B9B,EAAEa,MAAMmC,YAAY,UACpBhD,EAAE,QAAQgD,YAAY,qBAGxBhD,EAAE,yBAAyB8B,GAAG,QAAS,WACrC,OAAO,IAIT9B,EAAE,4CAA4CY,KAAK,WACjD,IAAMyD,EAAQrE,EAAEa,MAAM2D,KAAK,iBACrBF,EAAUG,OAAOJ,GACnBC,IAAYI,MAAMJ,IAAuB,GAAXA,GAAgBA,GAAW,KAC/CtE,EAAEa,MAAMqB,KAClB,kDAEEyC,IAAI,QAAR,GAAAC,OAAoBN,EAApB,UAxRR,CA4RGO","file":"main.min.js","sourcesContent":["(function ($) {\r\n  $(document).ready(function () {\r\n    resize();\r\n    $(window).on(\"resize\", function () {\r\n      resize();\r\n    });\r\n    function resize() {\r\n      const win = $(window); //this = window\r\n      const width = win.outerWidth();\r\n\r\n      const productPageSidebar = $(\".product-page-sidebar\");\r\n      const productComments = $(\".product-page__reviews-comments\");\r\n      const breadcrumb = $(\".breadcrumb\");\r\n      const toShorten = $(\".to-shorten\");\r\n      if (width <= 990) {\r\n        // Move product sidebar on   mobile\r\n        if (productPageSidebar) {\r\n          productPageSidebar\r\n            .detach()\r\n            .appendTo(\".product-page__mobile-sidebar-spot\");\r\n        }\r\n        // To shorten big chunks of text\r\n        if (toShorten) {\r\n          toShorten.each(function () {\r\n            if ($(this).height() > 100 && !$(this).hasClass(\"shortened\")) {\r\n              $(this).addClass(\"shortened\");\r\n              $(\r\n                \"<a href='#' class='shortened__toggle d-block mbp-20'>Читать полностью</a>\",\r\n              ).insertAfter($(this));\r\n            }\r\n          });\r\n        }\r\n\r\n        // Shorten mobile breadcrumb\r\n        if (breadcrumb && !breadcrumb.hasClass(\"mobile-breadcrumb\")) {\r\n          breadcrumb.addClass(\"mobile-breadcrumb\");\r\n\r\n          let bcInitialLength = breadcrumb.children().length;\r\n          breadcrumb.children().each(function (index) {\r\n            if (index !== 0 && index !== bcInitialLength - 1) {\r\n              $(this).remove();\r\n            }\r\n          });\r\n          if (bcInitialLength > 2) {\r\n            $(\r\n              '<li class=\"breadcrumb-item text-black-secondary\">...</li>',\r\n            ).insertAfter(breadcrumb.children(\":first\"));\r\n          }\r\n        }\r\n\r\n        // Slick mobile-slider\r\n        $(\".mobile-slider\").each(function () {\r\n          if (!$(this).hasClass(\"slick-initialized\")) {\r\n            $(\".mobile-slider\").slick({\r\n              infinite: false,\r\n              dots: false,\r\n              arrows: false,\r\n              slidesToShow: 1.1,\r\n              // centerMode: true,\r\n              // centerPadding: \"20px\",\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        // Put product sidebar back on desktop\r\n        if (productPageSidebar) {\r\n          if (!productPageSidebar.parent().hasClass(\"sidebar-initial-spot\")) {\r\n            productPageSidebar.detach().appendTo(\".sidebar-initial-spot\");\r\n          }\r\n        }\r\n        // Destroy mobile-slider\r\n        $(\".mobile-slider\").each(function () {\r\n          if ($(this).hasClass(\"slick-initialized\")) {\r\n            $(this).slick(\"unslick\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    $(document).on(\"click\", \".shortened__toggle\", function (e) {\r\n      e.preventDefault();\r\n      $(this).parent().find(\".to-shorten.shortened\").addClass(\"active\");\r\n      $(this).remove();\r\n    });\r\n\r\n    // // Swipe mobile-slider class on mobile\r\n    // $(\".mobile-slider\").each(function () {\r\n    //   if ($(\"body\").width() <= \"990\") {\r\n    //     let $self = $(this);\r\n    //     let panStart = null;\r\n    //     let target = new Hammer($self[0]);\r\n    //     let position = 0;\r\n    //     let width = $self[0].scrollWidth - $self.width();\r\n\r\n    //     target.on(\"panstart\", function ($event) {\r\n    //       panStart = $event.center.x;\r\n    //       if (\r\n    //         $self.data(\"position\") &&\r\n    //         !isNaN(Number($self.data(\"position\")))\r\n    //       ) {\r\n    //         position = Number($self.data(\"position\"));\r\n    //       }\r\n    //     });\r\n    //     target.on(\"panend\", function ($event) {\r\n    //       panStart = null;\r\n    //       if (Number($self.data(\"position\")) > 0) {\r\n    //         $self.children().css(\"transform\", `translateX(${0}px)`);\r\n    //         $self.data(\"position\", 0);\r\n    //       }\r\n    //       if (Number($self.data(\"position\")) < -width) {\r\n    //         $self.children().css(\"transform\", `translateX(${-width}px)`);\r\n    //         $self.data(\"position\", -width);\r\n    //       }\r\n    //     });\r\n\r\n    //     target.on(\"pan\", function ($event) {\r\n    //       const walk = ($event.center.x - panStart) * 1; //scroll-fast\r\n    //       // console.log(walk);\r\n    //       // $self.scrollLeft($self.scrollLeft() - walk);\r\n    //       let newPosition = position + walk;\r\n    //       $self.children().css(\"transform\", `translateX(${newPosition}px)`);\r\n    //       // position = newPosition;\r\n    //       $self.data(\"position\", newPosition);\r\n    //     });\r\n    //   }\r\n    // });\r\n\r\n    // Swiper initialize\r\n    $(\".product-media-gallery\").each(function () {\r\n      const thumb = $(this).find(\".product-media-gallery__thumbs\");\r\n      const top = $(this).find(\".product-media-gallery__top\");\r\n\r\n      let galleryThumbs = new Swiper(thumb[0], {\r\n        spaceBetween: 10,\r\n        slidesPerView: 4,\r\n        // freeMode: true,\r\n        watchSlidesVisibility: true,\r\n        watchSlidesProgress: true,\r\n        // slidesPerGroup: 3,\r\n        on: {\r\n          init: function () {\r\n            if ($(this)[0].slides.length > 4) {\r\n              $(\".product-media-gallery__thumbs-arrow-forward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n          },\r\n          slideChange: function () {\r\n            console.log($(this));\r\n            let slider = $(this)[0];\r\n            if (slider.isEnd) {\r\n              $(\r\n                \".product-media-gallery__thumbs-arrow-forward-wrap\",\r\n              ).removeClass(\"active\");\r\n            } else {\r\n              $(\".product-media-gallery__thumbs-arrow-forward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n            if (slider.isBeginning) {\r\n              $(\r\n                \".product-media-gallery__thumbs-arrow-backward-wrap\",\r\n              ).removeClass(\"active\");\r\n            } else {\r\n              $(\".product-media-gallery__thumbs-arrow-backward-wrap\").addClass(\r\n                \"active\",\r\n              );\r\n            }\r\n          },\r\n        },\r\n      });\r\n\r\n      let galleryTop = new Swiper(top[0], {\r\n        spaceBetween: 10,\r\n        navigation: {\r\n          nextEl: \".swiper-button-next\",\r\n          prevEl: \".swiper-button-prev\",\r\n        },\r\n        pagination: {\r\n          el: \".swiper-pagination\",\r\n        },\r\n        thumbs: {\r\n          swiper: galleryThumbs,\r\n          autoScrollOffset: 1,\r\n        },\r\n      });\r\n    });\r\n\r\n    // $(\"[data-badge]\").each(function () {\r\n    //   const badgeValue = $(this).data(\"badge\");\r\n    //   $(this).addClass(\"has-badge\");\r\n    //   $(this).append(`<span class=\"has-badge__item\">${badgeValue}</span>`);\r\n    // });\r\n    if ($(\"body\").width() <= \"576\") {\r\n      if ($(document).scrollTop() >= 300) {\r\n        $(\".main-header__top\").addClass(\"fixed\");\r\n      } else {\r\n        $(\".main-header__top\").removeClass(\"fixed\");\r\n      }\r\n    }\r\n    $(document).on(\"scroll\", function () {\r\n      if ($(\"body\").width() <= \"576\") {\r\n        if ($(document).scrollTop() >= 300) {\r\n          $(\".main-header__top\").addClass(\"fixed\");\r\n        } else {\r\n          $(\".main-header__top\").removeClass(\"fixed\");\r\n        }\r\n      }\r\n    });\r\n\r\n    $(\".categories-panel a\").each(function () {\r\n      $(this)[0].ondragstart = function () {\r\n        return false;\r\n      };\r\n    });\r\n\r\n    // Swipe categories\r\n    $(\".categories-panel\").each(function () {\r\n      let $self = $(this);\r\n      let panStart = null;\r\n      let categoryPan = new Hammer($self[0]);\r\n\r\n      categoryPan.on(\"panstart\", function ($event) {\r\n        panStart = $event.center.x;\r\n      });\r\n      categoryPan.on(\"panend\", function ($event) {\r\n        panStart = null;\r\n      });\r\n\r\n      categoryPan.on(\"pan\", function ($event) {\r\n        const walk = ($event.center.x - panStart) * 0.08; //scroll-fast\r\n        $self.scrollLeft($self.scrollLeft() - walk);\r\n      });\r\n    });\r\n\r\n    $(\".static-seo__toggle\").each(function () {\r\n      $(this).on(\"click\", function (e) {\r\n        e.preventDefault();\r\n        const parent = $(this).closest(\".static-seo\");\r\n        parent.addClass(\"active\");\r\n      });\r\n    });\r\n\r\n    // Open video overlay\r\n    $(\r\n      \".open-video-popup, .blog-posts-grid__video-item .blog-posts-grid__item-thumbnail-wrap a\",\r\n    ).on(\"click\", function (e) {\r\n      e.preventDefault();\r\n      $(\"body\").addClass(\"overflow-hidden\");\r\n      $(\"#videoPopupOverlay\").addClass(\"active\");\r\n\r\n      if ($(\"body\").width() <= \"990\") {\r\n        // rebuild carousel because overlay doesn't calculate properly\r\n        $(\"#videoPopupOverlay\").find(\".mobile-slider\").slick(\"unslick\").slick({\r\n          infinite: false,\r\n          dots: false,\r\n          arrows: false,\r\n          slidesToShow: 1.1,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Close overlay on outside click\r\n    $(\".overlay-cdk\").on(\"click\", function () {\r\n      $(this).removeClass(\"active\");\r\n      $(\"body\").removeClass(\"overflow-hidden\");\r\n    });\r\n    // Prevent overlay closing on content click\r\n    $(\".overlay-cdk__content\").on(\"click\", function () {\r\n      return false;\r\n    });\r\n\r\n    // product reviews bar value\r\n    $(\".product-page__reviews-summary-score-bar\").each(function () {\r\n      const value = $(this).data(\"percent-value\");\r\n      const percent = Number(value);\r\n      if (percent && !isNaN(percent) && percent >= 0 && percent <= 100) {\r\n        const bar = $(this).find(\r\n          \".product-page__reviews-summary-score-bar-inner\",\r\n        );\r\n        bar.css(\"width\", `${percent}%`);\r\n      }\r\n    });\r\n  });\r\n})(jQuery);\r\n"]}