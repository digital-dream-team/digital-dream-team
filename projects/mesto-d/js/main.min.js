"use strict";function ownKeys(e,a){var n,t=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)),t}function _objectSpread(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(n),!0).forEach(function(a){_defineProperty(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var config={membersUrl:"http://api.mestodteatr.kg/plays-service/api/mobile/members?lang=ru",playsUrl:"http://api.mestodteatr.kg/plays-service/api/mobile/plays?lang=ru&limit=5",settingsUrl:"http://api.mestodteatr.kg/pages-service/app/settings"};!function(T){T(function(){T.ajax({url:config.settingsUrl,type:"GET",dataType:null,async:!1,success:function(a){if(!a.success||a.error)return alert("Ошибка при загрузке настроек"),T(".settings-option__phone").html("N/A"),void T(".settings-option__email").html("N/A");a=a.data;T(".settings-option__phone").html(a.phone).attr("href","tel:"+a.phone),T(".settings-option__email").html(a.email).attr("href","mailto:"+a.email),T(".settings-option__facebook").attr("href",a.facebook_url),T(".settings-option__whatsapp").attr("href",a.whatsapp_url),T(".settings-option__instagram").attr("href",a.instagram_url),console.log(a)},error:function(a){console.error(a)}});var w=[];T.ajax({url:config.playsUrl,type:"GET",dataType:null,async:!1,success:function(a){a=a.data;w=a.map(function(a){var e=a.id,n=a.age_category,t=a.cost,o=a.create_date,r=a.duration_min,l=a.img_url,s=a.is_free,i=a.team_id,c=a.desc,p=a.file_size,d=a.lang,m=a.name,u=a.short_desc,v=a.track_url,y=a.video_url,_=a.is_hit,f="N/A";a.director&&(f="".concat(a.director.first_name," ").concat(a.director.middle_name," ").concat(a.director.last_name));var h=null;a.from&&(h=a.from.name);var b=null;a.to&&(b=a.to.name);var P=[];a.markerlist&&(P=a.markerlist);var g,w=c;return!c||1<(c=c.split("![")).length&&(g=[],c.forEach(function(a,e){0===e?g.push(a):0<e&&(a=(e=a.split("](")[1].split(")")).shift(),e=e.join(")"),g.push('<div><img src="'.concat(a,'" alt="pic" class="w-100" /></div>')),g.push(e))}),w="",g.forEach(function(a,e){w+=a,e+1!==g.length&&(w+=" ")})),{id:e,age_category:n,cost:t,duration_min:r,img_url:l,is_free:s,team_id:i,create_date:o,desc:w,file_size:p,lang:d,name:m,short_desc:u,track_url:v,video_url:y,is_hot:_,director_name:f,route_from:h,route_to:b,route:P,map:null,members:[],readers:[]}})},error:function(a){console.error(a)}}),T(".plays-swiper .swiper-wrapper").each(function(){var m=this;T(this).empty(),w.forEach(function(a){var e=a.id,n=a.img_url,t=a.name,o=a.director_name,r=a.route_from,l=a.route_to,s=a.duration_min,i=a.file_size,c=a.age_category,p=a.is_free,d=a.is_hot,a="".concat(s," минут"),s="".concat(i," mb"),i="";c&&(i+='<div class="play-card__image-label">'.concat(c,"</div>")),p&&(i+='<div class="play-card__image-label">Бесплатно</div>'),d&&(i+='<div class="play-card__image-label play-card__image-label--hot">\n            Хит!\n          </div>'),T(m).append('\n          <div class="swiper-slide">\n            <div class="play-card-wrap">\n              <a class="open-play-popup" data-id="'.concat(e,'">\n                <div class="play-card">\n                  <div class="play-card__image-wrap">\n                    <img\n                      src="').concat(n,'"\n                      alt="play"\n                      class="play-card__image"\n                    />\n                    <div class="play-card__image-labels">\n                      ').concat(i,'\n                    </div>\n                  </div>\n                  <div class="play-card__body">\n                    <div class="play-card__body-header">\n                      <div class="play-card__body-meta-container">\n                        <div class="play-card__body-meta">\n                          <i class="icon-timer"></i>\n                          <span>').concat(a,'</span>\n                        </div>\n                        <div class="play-card__body-meta">\n                          <i class="icon-insert"></i>\n                          <span>').concat(s,'</span>\n                        </div>\n                      </div>\n                      <div class="play-card__body-director text-truncate">\n                        <span class="play-card__body-director-position">\n                          Режиссер:\n                        </span>\n                        <span class="play-card__body-director-name">\n                          ').concat(o,'\n                        </span>\n                      </div>\n                    </div>\n                    <div class="play-card__body-title">\n                      ').concat(t,'\n                    </div>\n                    <div class="play-card__body-route">\n                      <div class="play-card__body-route-from">\n                        <span class="play-card__body-route-title">\n                          от\n                        </span>\n                        <span\n                          class="play-card__body-route-name text-truncate"\n                        >\n                          ').concat(r,'\n                        </span>\n                      </div>\n                      <div class="play-card__body-route-separator">\n                        <i class="icon-arrow-right"></i>\n                      </div>\n                      <div class="play-card__body-route-to">\n                        <span class="play-card__body-route-title">\n                          до\n                        </span>\n                        <span\n                          class="play-card__body-route-name text-truncate"\n                        >\n                          ').concat(l,'\n                        </span>\n                      </div>\n                    </div>\n                    <div class="play-card__body-controls">\n                      <span class="play-card__btn">\n                        Подробнее о спектакле\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        '))})});var e=[];!function(){T.ajax({url:config.membersUrl,type:"GET",dataType:null,async:!1,success:function(a){a=a.data;e=a.map(function(a){var e=a.avatar_url;return{id:a.id,avatar_url:e,desc:a.desc,first_name:a.first_name,lang:a.lang,last_name:a.last_name,middle_name:a.middle_name,role:a.default_role.name,socials:[]}})},error:function(a){console.error(a)}});var a=e;T(".team-swiper .swiper-wrapper").each(function(){var i=this;T(this).empty(),a.forEach(function(a){var e=a.first_name,n=a.last_name,t=a.middle_name,o=a.avatar_url,r=a.desc,l=a.role,r=r,s="";a.socials.forEach(function(a){s+='\n              <div>\n                <a\n                  href="'.concat(a.value,'"\n                  class="team-member-card__body-social-link"\n                  target="_blank"\n                >\n                  ').concat(a.name,"\n                </a>\n              </div>\n            ")}),T(i).append('\n          <div class="swiper-slide">\n            <div class="team-member-card-wrap">\n              <div class="team-member-card">\n                <div class="team-member-card__image-wrap">\n                  <img\n                    src="'.concat(o,'"\n                    alt="member"\n                    class="team-member-card__image"\n                  />\n                </div>\n                <div class="team-member-card__body">\n                  <div class="team-member-card__body-name">\n                    ').concat(n," ").concat(e," ").concat(t,'\n                  </div>\n                  <div class="team-member-card__body-position">\n                    ').concat(l,'\n                  </div>\n                  <div class="team-member-card__body-accolades">\n                    ').concat(r,'\n                  </div>\n                  <div class="team-member-card__body-socials">\n                    ').concat(s,"\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        "))})}),T(".team-row").each(function(){var o=this;T(this).empty(),e.forEach(function(a){var e=a.first_name,n=a.last_name,t=a.middle_name,a=(a.avatar_url,a.desc,a.role);T(o).append('\n            <div class="col-6 col-md-2">\n              <div class="team-member">\n                <p class="team-member__position">'.concat(a,':</p>\n                <p class="team-member__name">').concat(n," ").concat(e," ").concat(t,"</p>\n              </div>\n            </div>\n          "))})})}(),T(".ajax-contact-form").on("submit",function(a){a.preventDefault();var e=T(this).attr("action"),n=T(this).attr("method"),t=T(this).data("type")||null,a=T(this).serializeArray(),o=T(this),r={};a.forEach(function(a){r[a.name]=a.value}),T.ajax({url:e,type:n,dataType:t,data:_objectSpread({},r),success:function(a){o.find("input, textarea").val(""),T(".overlay-cdk").removeClass("active"),i()},error:function(a){alert("Ошибка, повторите позднее"),console.error(a)}})});var n=!1;function t(){n=!0,setTimeout(function(){T("body").addClass("loaded"),T(".preloader-section").addClass("loaded"),T(".main-content").removeClass("d-none"),T(".pipe-container-wrap").removeClass("d-none"),setTimeout(function(){T(".preloader-section").addClass("d-none"),T(".section-hero__composit-title-img-wrap").addClass("fadeInUp animated"),T(".section-hero__composit-title-1").addClass("fadeInUp animated"),T(".section-hero__composit-title-2").addClass("fadeInUp animated"),T(".section-hero__composit-title-3").addClass("fadeInUp animated"),T(".section-hero__subtitle").addClass("fadeInUp animated"),T(".section-hero__content .store-btn").addClass("fadeInUp animated"),T(".section-hero__phones-item-wrap").addClass("fadeInUp animated"),T(".floating-circles").addClass("animated"),T(".plays-swiper").length&&T(".plays-swiper").each(function(){T(this).closest(".plays-swiper-wrap").find(".swiper-button-prev")[0],T(this).closest(".plays-swiper-wrap").find(".swiper-button-next")[0];new Swiper(T(this)[0],{slidesPerView:1,spaceBetween:20,freeMode:!0,breakpoints:{768:{slidesPerView:2},992:{slidesPerView:3}},on:{init:function(){this.$el.css("padding-left","40%")}}})}),T(".team-swiper").length&&T(".team-swiper").each(function(){T(this).closest(".team-swiper-wrap").find(".swiper-button-prev")[0],T(this).closest(".team-swiper-wrap").find(".swiper-button-next")[0];new Swiper(T(this)[0],{slidesPerView:1,spaceBetween:20,freeMode:!0,breakpoints:{768:{slidesPerView:2},992:{slidesPerView:3}}})}),setTimeout(function(){s(),T(".pipe-container-wrap").removeClass("opacity-0");var a=T(document),e=T(window),n=T("svg").drawsvg(),t=a.height()-e.height(),a=e.scrollTop()/t;n.drawsvg("progress",a),e.on("scroll",function(){var a=e.scrollTop()/t;n.drawsvg("progress",a)})},200)},200)},400)}function o(){T("#mainHeaderNavbar").find(".navbar-nav").css({transition:"400ms",transform:"translateX(300px)"}),setTimeout(function(){T(".navbar-collapse").removeClass("open"),T("body").removeClass("overflow-hidden"),T(".navbar-collapse__close-btn").remove()},400)}T("body").imagesLoaded().progress(function(a,e){var n;a.images&&(n=a.images.length,a=a.images.filter(function(a){return a.isLoaded}).length,n=Math.floor(a/n*100),T(".preloader-section__bar-overlay").css("width","".concat(n,"%")))}).always(function(a){setTimeout(function(){n||t()},250)}),setTimeout(function(){n||t()},6e4),T(".navbar-toggler").on("click",function(){T("#mainHeaderNavbar").addClass("open"),T("body").addClass("overflow-hidden"),T("#mainHeaderNavbar").find(".navbar-nav").prepend('<button class="navbar-collapse__close-btn">✖</button>'),T("#mainHeaderNavbar").find(".navbar-nav").css({transition:0,transform:"translateX(300px)"}),setTimeout(function(){T("#mainHeaderNavbar").find(".navbar-nav").css({transition:"400ms",transform:"translateX(0)"})},0)}),T(document).on("click",".navbar-collapse__close-btn",function(a){o()}),T(".navbar-collapse").on("click",function(a){a.target===a.currentTarget&&o()}),T(".main-header .navbar-nav .nav-item .nav-link").on("click",function(){T(window).outerWidth(!0)<992&&o()}),T(window).on("scroll",function(){var a;T(".main-header").length&&n&&(a=T(".section-hero").height(),window.pageYOffset>a?T(".main-header").hasClass("d-none")&&(T(".main-header").removeClass("d-none").css("opacity",0),T(".main-header").animate({opacity:1},500)):T(".main-header").hasClass("d-none")||(T(".main-header").addClass("d-none"),T(".main-header").css("opacity",0)))});var a=!1,r=null,l=null;function s(){T(window).outerWidth()<=990?a&&(a=!1,r.destroy&&(r.destroy(),r=null),l.destroy&&(l.destroy(),l=null)):(T("#mainHeaderNavbar").find(".navbar-nav").css({transition:"none",transform:"none"}),a||(a=!0,r=new Rellax(".rellax",{speed:1,center:!0}),l=new Rellax(".rellax-2",{speed:1,center:!0})))}T(window).on("resize",function(){s()});var k=null,C=null;function i(){T("body").addClass("overflow-hidden"),T("#thanksPopup").addClass("active"),T("#thanksPopup").find(".overlay-cdk__content-wrap").css({transform:"translateY(100%)"}),setTimeout(function(){T("#thanksPopup").find(".overlay-cdk__content-wrap").css({transition:"600ms",transform:"translateY(0)"})},0)}function c(){T(".overlay-cdk").removeClass("active"),T("body").removeClass("overflow-hidden")}T(".open-play-popup").on("click",function(a){a.preventDefault(),T("body").addClass("overflow-hidden"),T("#playPopup").addClass("active"),T("#playPopup").find(".overlay-cdk__content-wrap").css({transform:"translateY(100%)"}),setTimeout(function(){T("#playPopup").find(".overlay-cdk__content-wrap").css({transition:"600ms",transform:"translateY(0)"})},0),T("#playPopupPlayerMin").html("".concat(0," мин")),T("#playPopupPlayerSec").html("".concat(0," сек")),T(".overlay-cdk__content-play-wrap")[0].scrollTop=0;var e=T(this).data("id"),n=w.find(function(a){return a.id===e}),t=n.is_hot,o=n.is_free,r=n.age_category,l=n.img_url,s=n.name,i=n.short_desc,c=n.track_url,p=n.director_name,d=n.route_from,m=n.route_to,u=n.map,v=n.desc,y=n.members,_=n.readers,f=n.route,a="";r&&(a+='<div class="play-card__image-label">'.concat(r,"</div>")),o&&(a+='<div class="play-card__image-label">Бесплатно</div>'),t&&(a+='<div class="play-card__image-label play-card__image-label--hot">\n          Хит!\n        </div>');var h="";y.forEach(function(a){h+='\n          <div class="col-6">\n            <div class="team-member mbp-10">\n              <p class="team-member__position">'.concat(a.position,':</p>\n              <p class="team-member__name">').concat(a.name,"</p>\n            </div>\n          </div>\n        ")});var b="";_.forEach(function(a){b+='\n          <div class="col-6">\n            <div class="team-member mbp-10">\n              <p class="team-member__name">'.concat(a.name,"</p>\n            </div>\n          </div>\n        ")});var P="";f.forEach(function(a){P+='\n          <li class="overlay-cdk__content-play-timeline-item">\n            '.concat(a.name,"\n          </li>\n        ")});f="".concat(n.duration_min," минут"),n="".concat(n.file_size," mb"),n='\n        <div class="overlay-cdk__content-play-body-meta">\n          <i class="icon-timer"></i>\n          <span>'.concat(f,'</span>\n        </div>\n        <div class="overlay-cdk__content-play-body-meta">\n          <i class="icon-insert"></i>\n          <span>').concat(n,"</span>\n        </div>\n      ");T("#playPopup .overlay-cdk__content-play-image").attr("src",l),T("#playPopup .overlay-cdk__content-play-title").html(s),T("#playPopup .overlay-cdk__content-play-image-labels").html(a),T("#playPopup .overlay-cdk__content-play-body-meta-container").html(n),T("#playPopup .overlay-cdk__content-play-body-director-name").html(p),T("#playPopup .overlay-cdk__content-play-short-description").html(i),T("#playPopupPlayerSrc").val(c),T("#playPopup .overlay-cdk__content-play-route-from .overlay-cdk__content-play-route-name").html(d),T("#playPopup .overlay-cdk__content-play-route-to .overlay-cdk__content-play-route-name").html(m),T("#playPopup .overlay-cdk__content-play-timeline").html(P),h?(T(".overlay-cdk__content-play-team").removeClass("d-none"),T("#playPopup .overlay-cdk__content-play-team > .row").html(h)):T(".overlay-cdk__content-play-team").addClass("d-none"),b?(T(".overlay-cdk__content-play-readers").removeClass("d-none"),T("#playPopup .overlay-cdk__content-play-readers > .row").html(b)):T(".overlay-cdk__content-play-readers").addClass("d-none"),u?(T("#playPopup .overlay-cdk__content-play-map").removeClass("d-none"),T("#playPopup .overlay-cdk__content-play-map").attr("src",u)):T("#playPopup .overlay-cdk__content-play-map").addClass("d-none"),T("#playPopup .overlay-cdk__content-play-description").html(v).css("white-space","break-spaces");var g,u=T("#playPopupPlayerVolume").val()/100,v=T("#playPopupPlayerSrc").val();v?(T(".overlay-cdk__content-play-col").removeClass("d-none"),k=new Howl({src:v,loop:!1,preload:!1,volume:u,html5:!0,format:["mpeg","mp3"]}),g=!1,k.on("load",function(){g=!0;var a=Math.floor(k.duration()),e=String(Math.floor(a/60)).padStart(2,"0"),a=String(a-60*e).padStart(2,"0");g||T(this).addClass("active"),T("#playPopupPlayerMin").html("".concat(e," мин")),T("#playPopupPlayerSec").html("".concat(a," сек")),T("#playPopupPlayerPreloader").addClass("d-none"),T("#playPopupPlayer").removeClass("d-none"),T("#playPopupPlayerVolume").removeClass("d-none")}),k.on("play",function(){T("#playPopupPlayer").addClass("active"),setTimeout(function(){T("#playPopupPlayerProgress").css("transition","2000ms")},200),null!==C&&(clearInterval(C),C=null),C=setInterval(function(){var a,e;k.playing()&&(e=Math.floor(k.duration()),a=Math.floor(k.seek()),e=Math.round(a/e*100),T("#playPopupPlayerProgress").css("width","".concat(e,"%")))},500)}),k.on("stop",function(){T("#playPopupPlayer").removeClass("active"),T("#playPopupPlayerProgress").css("transition",""),null!==C&&(clearInterval(C),C=null)}),k.on("end",function(){T("#playPopupPlayer").removeClass("active"),T("#playPopupPlayerProgress").css("transition",""),null!==C&&(clearInterval(C),C=null)}),k.on("pause",function(){T("#playPopupPlayer").removeClass("active"),T("#playPopupPlayerProgress").css("transition",""),null!==C&&(clearInterval(C),C=null)}),T("#playPopupPlayerVolume").on("input",function(){var a=T(this).val()/100;k&&k.volume(a)}),T("#playPopupPlayer").on("click",function(){return k&&k.playing()?k.stop():void k.play()}),g||k.load()):T(".overlay-cdk__content-play-col").addClass("d-none")}),T(".open-contact-popup").on("click",function(a){a.preventDefault(),T("body").addClass("overflow-hidden"),T("#contactFormPopup").addClass("active"),T("#contactFormPopup").find(".overlay-cdk__content-wrap").css({transform:"translateY(100%)"}),setTimeout(function(){T("#contactFormPopup").find(".overlay-cdk__content-wrap").css({transition:"600ms",transform:"translateY(0)"})},0)}),T(".open-thanks-popup").on("click",function(a){a.preventDefault(),i()}),T(".overlay-cdk").on("click",function(a){a.target===a.currentTarget&&(T("#playPopup").hasClass("active")&&k&&(null!==C&&(clearInterval(C),C=null),k.off(),k.unload(),k=null,T("#playPopupPlayer").removeClass("active").addClass("d-none"),T("#playPopupPlayerPreloader").removeClass("d-none"),T("#playPopupPlayerVolume").addClass("d-none"),T("#playPopupPlayerProgress").css("transition","").css("width",""),T("#playPopupPlayerVolume").off("input"),T("#playPopupPlayer").off("click")),c())}),T(".overlay-cdk__close-btn").on("click",function(a){c()});var p=T("#previewPlayerVolume").val()/100,d=T("#previewPlayerSrc").val(),m=new Howl({src:d,loop:!1,preload:!1,volume:p});T("#previewPlayerVolume").on("input",function(){var a=T(this).val()/100;m&&m.volume(a)});var u=!1,v=!1;T("#playPreview").on("click",function(){if(!v)return u?m&&m.playing()?m.stop():void m.play():(T(this).addClass("active"),v=!0,m.load())}),m.once("load",function(){m.play(),v=!(u=!0)});var y=null;m.on("play",function(){T("#playPreview").addClass("active"),setTimeout(function(){T("#previewPlayerProgress").css("transition","2000ms")},200),null!==y&&(clearInterval(y),y=null),y=setInterval(function(){var a,e,n,t,o;m.playing()&&(t=Math.floor(m.duration()),o=Math.floor(m.seek()),a=Math.round(o/t*100),e=String(Math.floor(t/60)).padStart(2,"0"),n=String(t-60*e).padStart(2,"0"),t=String(Math.floor(o/60)).padStart(2,"0"),o=String(o-60*t).padStart(2,"0"),T("#previewPlayerPosition").html("".concat(t,":").concat(o)),T("#previewPlayerDuration").html("".concat(e,":").concat(n)),T("#previewPlayerProgress").css("width","".concat(a,"%")))},500)}),m.on("stop",function(){T("#playPreview").removeClass("active"),T("#previewPlayerProgress").css("transition",""),null!==y&&(clearInterval(y),y=null)}),m.on("end",function(){T("#playPreview").removeClass("active"),T("#previewPlayerProgress").css("transition",""),null!==y&&(clearInterval(y),y=null)}),m.on("pause",function(){T("#playPreview").removeClass("active"),T("#previewPlayerProgress").css("transition",""),null!==y&&(clearInterval(y),y=null)})})}(jQuery);
//# sourceMappingURL=main.min.js.map
